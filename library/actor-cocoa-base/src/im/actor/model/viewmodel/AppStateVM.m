//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/viewmodel/AppStateVM.java
//

#line 1 "/Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/viewmodel/AppStateVM.java"

#include "J2ObjC_source.h"
#include "im/actor/model/droidkit/engine/PreferencesStorage.h"
#include "im/actor/model/modules/Modules.h"
#include "im/actor/model/mvvm/ValueModel.h"
#include "im/actor/model/viewmodel/AppStateVM.h"
#include "java/lang/Boolean.h"

__attribute__((unused)) static void AMAppStateVM_updateLoaded(AMAppStateVM *self);

@interface AMAppStateVM () {
 @public
  ImActorModelModulesModules *modules_;
  AMValueModel *isDialogsEmpty_;
  AMValueModel *isContactsEmpty_;
  AMValueModel *isAppEmpty_;
  AMValueModel *isAppLoaded_;
  jboolean isBookImported_;
  jboolean isDialogsLoaded_;
  jboolean isContactsLoaded_;
}

- (void)updateLoaded;
@end

J2OBJC_FIELD_SETTER(AMAppStateVM, modules_, ImActorModelModulesModules *)
J2OBJC_FIELD_SETTER(AMAppStateVM, isDialogsEmpty_, AMValueModel *)
J2OBJC_FIELD_SETTER(AMAppStateVM, isContactsEmpty_, AMValueModel *)
J2OBJC_FIELD_SETTER(AMAppStateVM, isAppEmpty_, AMValueModel *)
J2OBJC_FIELD_SETTER(AMAppStateVM, isAppLoaded_, AMValueModel *)


#line 9
@implementation AMAppStateVM


#line 25
- (instancetype)initWithImActorModelModulesModules:(ImActorModelModulesModules *)modules {
  if (self = [super init]) {
    
#line 26
    self->modules_ = modules;
    
#line 27
    self->isDialogsEmpty_ = [[AMValueModel alloc] initWithNSString:@"app.dialogs.empty" withId:JavaLangBoolean_valueOfWithBoolean_([((id<DKPreferencesStorage>) nil_chk([((ImActorModelModulesModules *) nil_chk(modules)) getPreferences])) getBool:@"app.dialogs.empty" withDefault:YES])];
    
#line 28
    self->isContactsEmpty_ = [[AMValueModel alloc] initWithNSString:@"app.contacts.empty" withId:JavaLangBoolean_valueOfWithBoolean_([((id<DKPreferencesStorage>) nil_chk([modules getPreferences])) getBool:@"app.contacts.empty" withDefault:YES])];
    
#line 29
    self->isAppEmpty_ = [[AMValueModel alloc] initWithNSString:@"app.empty" withId:JavaLangBoolean_valueOfWithBoolean_([((id<DKPreferencesStorage>) nil_chk([modules getPreferences])) getBool:@"app.empty" withDefault:YES])];
    
#line 31
    self->isBookImported_ = [((id<DKPreferencesStorage>) nil_chk([modules getPreferences])) getBool:@"app.contacts.imported" withDefault:NO];
    
#line 32
    self->isDialogsLoaded_ = [((id<DKPreferencesStorage>) nil_chk([modules getPreferences])) getBool:@"app.dialogs.loaded" withDefault:NO];
    
#line 33
    self->isContactsLoaded_ = [((id<DKPreferencesStorage>) nil_chk([modules getPreferences])) getBool:@"app.contacts.loaded" withDefault:NO];
    
#line 35
    self->isAppLoaded_ = [[AMValueModel alloc] initWithNSString:@"app.loaded" withId:JavaLangBoolean_valueOfWithBoolean_(isBookImported_ && isDialogsLoaded_ && isContactsLoaded_)];
  }
  return self;
}


#line 38
- (void)updateLoaded {
  AMAppStateVM_updateLoaded(self);
}


#line 50
- (void)onDialogsChangedWithBoolean:(jboolean)isEmpty {
  @synchronized(self) {
    
#line 51
    if ([((JavaLangBoolean *) nil_chk([((AMValueModel *) nil_chk(isDialogsEmpty_)) get])) booleanValue] != isEmpty) {
      [((id<DKPreferencesStorage>) nil_chk([((ImActorModelModulesModules *) nil_chk(modules_)) getPreferences])) putBool:@"app.dialogs.empty" withValue:isEmpty];
      [isDialogsEmpty_ changeWithId:JavaLangBoolean_valueOfWithBoolean_(isEmpty)];
    }
    if (!isEmpty) {
      if ([((JavaLangBoolean *) nil_chk([((AMValueModel *) nil_chk(isAppEmpty_)) get])) booleanValue]) {
        [((id<DKPreferencesStorage>) nil_chk([((ImActorModelModulesModules *) nil_chk(modules_)) getPreferences])) putBool:@"app.empty" withValue:NO];
        [isAppEmpty_ changeWithId:JavaLangBoolean_valueOfWithBoolean_(NO)];
      }
    }
  }
}


#line 68
- (void)onContactsChangedWithBoolean:(jboolean)isEmpty {
  @synchronized(self) {
    
#line 69
    if ([((JavaLangBoolean *) nil_chk([((AMValueModel *) nil_chk(isContactsEmpty_)) get])) booleanValue] != isEmpty) {
      [((id<DKPreferencesStorage>) nil_chk([((ImActorModelModulesModules *) nil_chk(modules_)) getPreferences])) putBool:@"app.contacts.empty" withValue:isEmpty];
      [isContactsEmpty_ changeWithId:JavaLangBoolean_valueOfWithBoolean_(isEmpty)];
    }
    if (!isEmpty) {
      if ([((JavaLangBoolean *) nil_chk([((AMValueModel *) nil_chk(isAppEmpty_)) get])) booleanValue]) {
        [((id<DKPreferencesStorage>) nil_chk([((ImActorModelModulesModules *) nil_chk(modules_)) getPreferences])) putBool:@"app.empty" withValue:NO];
        [isAppEmpty_ changeWithId:JavaLangBoolean_valueOfWithBoolean_(NO)];
      }
    }
  }
}


#line 84
- (void)onPhoneImported {
  @synchronized(self) {
    
#line 85
    if (!isBookImported_) {
      isBookImported_ = YES;
      [((id<DKPreferencesStorage>) nil_chk([((ImActorModelModulesModules *) nil_chk(modules_)) getPreferences])) putBool:@"app.contacts.imported" withValue:YES];
      AMAppStateVM_updateLoaded(self);
    }
  }
}


#line 95
- (void)onDialogsLoaded {
  @synchronized(self) {
    
#line 96
    if (!isDialogsLoaded_) {
      isDialogsLoaded_ = YES;
      [((id<DKPreferencesStorage>) nil_chk([((ImActorModelModulesModules *) nil_chk(modules_)) getPreferences])) putBool:@"app.dialogs.loaded" withValue:YES];
      AMAppStateVM_updateLoaded(self);
    }
  }
}


#line 106
- (void)onContactsLoaded {
  @synchronized(self) {
    
#line 107
    if (!isContactsLoaded_) {
      isContactsLoaded_ = YES;
      [((id<DKPreferencesStorage>) nil_chk([((ImActorModelModulesModules *) nil_chk(modules_)) getPreferences])) putBool:@"app.contacts.loaded" withValue:YES];
      AMAppStateVM_updateLoaded(self);
    }
  }
}


#line 119
- (AMValueModel *)getIsDialogsEmpty {
  
#line 120
  return isDialogsEmpty_;
}


#line 128
- (AMValueModel *)getIsContactsEmpty {
  
#line 129
  return isContactsEmpty_;
}


#line 137
- (AMValueModel *)getIsAppLoaded {
  
#line 138
  return isAppLoaded_;
}


#line 146
- (AMValueModel *)getIsAppEmpty {
  
#line 147
  return isAppEmpty_;
}

- (void)copyAllFieldsTo:(AMAppStateVM *)other {
  [super copyAllFieldsTo:other];
  other->modules_ = modules_;
  other->isDialogsEmpty_ = isDialogsEmpty_;
  other->isContactsEmpty_ = isContactsEmpty_;
  other->isAppEmpty_ = isAppEmpty_;
  other->isAppLoaded_ = isAppLoaded_;
  other->isBookImported_ = isBookImported_;
  other->isDialogsLoaded_ = isDialogsLoaded_;
  other->isContactsLoaded_ = isContactsLoaded_;
}

@end

void AMAppStateVM_updateLoaded(AMAppStateVM *self) {
  
#line 39
  jboolean val = self->isBookImported_ && self->isDialogsLoaded_ && self->isContactsLoaded_;
  if ([((JavaLangBoolean *) nil_chk([((AMValueModel *) nil_chk(self->isAppLoaded_)) get])) booleanValue] != val) {
    [self->isAppLoaded_ changeWithId:JavaLangBoolean_valueOfWithBoolean_(val)];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AMAppStateVM)
