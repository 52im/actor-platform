//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/modules/Users.java
//

#line 1 "/Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/modules/Users.java"

#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "im/actor/model/Configuration.h"
#include "im/actor/model/StorageProvider.h"
#include "im/actor/model/api/base/SeqUpdate.h"
#include "im/actor/model/api/rpc/RequestEditName.h"
#include "im/actor/model/api/rpc/RequestEditUserLocalName.h"
#include "im/actor/model/api/rpc/ResponseSeq.h"
#include "im/actor/model/api/updates/UpdateUserLocalNameChanged.h"
#include "im/actor/model/api/updates/UpdateUserNameChanged.h"
#include "im/actor/model/concurrency/Command.h"
#include "im/actor/model/concurrency/CommandCallback.h"
#include "im/actor/model/droidkit/engine/KeyValueEngine.h"
#include "im/actor/model/droidkit/engine/KeyValueStorage.h"
#include "im/actor/model/entity/User.h"
#include "im/actor/model/modules/BaseModule.h"
#include "im/actor/model/modules/Modules.h"
#include "im/actor/model/modules/Updates.h"
#include "im/actor/model/modules/Users.h"
#include "im/actor/model/mvvm/MVVMCollection.h"
#include "im/actor/model/network/RpcException.h"
#include "im/actor/model/network/RpcInternalException.h"
#include "im/actor/model/viewmodel/UserVM.h"
#include "java/io/IOException.h"
#include "java/lang/Boolean.h"

@interface ImActorModelModulesUsers () {
 @public
  id<DKKeyValueEngine> users_;
  AMMVVMCollection *collection_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesUsers, users_, id<DKKeyValueEngine>)
J2OBJC_FIELD_SETTER(ImActorModelModulesUsers, collection_, AMMVVMCollection *)

@interface ImActorModelModulesUsers_$1 () {
 @public
  ImActorModelModulesUsers *this$0_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesUsers_$1, this$0_, ImActorModelModulesUsers *)

@interface ImActorModelModulesUsers_$2 () {
 @public
  ImActorModelModulesUsers *this$0_;
  NSString *val$newName_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesUsers_$2, this$0_, ImActorModelModulesUsers *)
J2OBJC_FIELD_SETTER(ImActorModelModulesUsers_$2, val$newName_, NSString *)

@interface ImActorModelModulesUsers_$2_$1 () {
 @public
  ImActorModelModulesUsers_$2 *this$0_;
  id<AMCommandCallback> val$callback_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesUsers_$2_$1, this$0_, ImActorModelModulesUsers_$2 *)
J2OBJC_FIELD_SETTER(ImActorModelModulesUsers_$2_$1, val$callback_, id<AMCommandCallback>)

@interface ImActorModelModulesUsers_$2_$1_$1 () {
 @public
  ImActorModelModulesUsers_$2_$1 *this$0_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesUsers_$2_$1_$1, this$0_, ImActorModelModulesUsers_$2_$1 *)

@interface ImActorModelModulesUsers_$2_$1_$2 () {
 @public
  ImActorModelModulesUsers_$2_$1 *this$0_;
  AMRpcException *val$e_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesUsers_$2_$1_$2, this$0_, ImActorModelModulesUsers_$2_$1 *)
J2OBJC_FIELD_SETTER(ImActorModelModulesUsers_$2_$1_$2, val$e_, AMRpcException *)

@interface ImActorModelModulesUsers_$3 () {
 @public
  ImActorModelModulesUsers *this$0_;
  jint val$uid_;
  NSString *val$name_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesUsers_$3, this$0_, ImActorModelModulesUsers *)
J2OBJC_FIELD_SETTER(ImActorModelModulesUsers_$3, val$name_, NSString *)

@interface ImActorModelModulesUsers_$3_$1 () {
 @public
  id<AMCommandCallback> val$callback_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesUsers_$3_$1, val$callback_, id<AMCommandCallback>)

@interface ImActorModelModulesUsers_$3_$2 () {
 @public
  ImActorModelModulesUsers_$3 *this$0_;
  id<AMCommandCallback> val$callback_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesUsers_$3_$2, this$0_, ImActorModelModulesUsers_$3 *)
J2OBJC_FIELD_SETTER(ImActorModelModulesUsers_$3_$2, val$callback_, id<AMCommandCallback>)

@interface ImActorModelModulesUsers_$3_$2_$1 () {
 @public
  ImActorModelModulesUsers_$3_$2 *this$0_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesUsers_$3_$2_$1, this$0_, ImActorModelModulesUsers_$3_$2 *)

@interface ImActorModelModulesUsers_$3_$2_$2 () {
 @public
  ImActorModelModulesUsers_$3_$2 *this$0_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesUsers_$3_$2_$2, this$0_, ImActorModelModulesUsers_$3_$2 *)


#line 24
@implementation ImActorModelModulesUsers


#line 28
- (instancetype)initWithImActorModelModulesModules:(ImActorModelModulesModules *)messenger {
  if (self =
#line 29
  [super initWithImActorModelModulesModules:messenger]) {
    
#line 30
    self->collection_ = [[ImActorModelModulesUsers_$1 alloc] initWithImActorModelModulesUsers:self withDKKeyValueStorage:[((id<AMStorageProvider>) nil_chk([((AMConfiguration *) nil_chk([((ImActorModelModulesModules *) nil_chk(messenger)) getConfiguration])) getStorageProvider])) createKeyValue:ImActorModelModulesBaseModule_get_STORAGE_USERS_()]];
    
#line 51
    self->users_ = [collection_ getEngine];
  }
  return self;
}


#line 54
- (AMMVVMCollection *)getUsersCollection {
  
#line 55
  return collection_;
}


#line 58
- (id<DKKeyValueEngine>)getUsers {
  
#line 59
  return users_;
}


#line 62
- (id<AMCommand>)editMyNameWithNSString:(NSString *)newName {
  
#line 63
  return [[ImActorModelModulesUsers_$2 alloc] initWithImActorModelModulesUsers:self withNSString:newName];
}


#line 95
- (id<AMCommand>)editNameWithInt:(jint)uid
                    withNSString:(NSString *)name {
  
#line 96
  return [[ImActorModelModulesUsers_$3 alloc] initWithImActorModelModulesUsers:self withInt:uid withNSString:name];
}

- (void)copyAllFieldsTo:(ImActorModelModulesUsers *)other {
  [super copyAllFieldsTo:other];
  other->users_ = users_;
  other->collection_ = collection_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesUsers)

@implementation ImActorModelModulesUsers_$1


#line 32
- (AMUserVM *)createNewWithDKKeyValueItem:(AMUser *)raw {
  
#line 33
  return [[AMUserVM alloc] initWithAMUser:raw withImActorModelModulesModules:[this$0_ modules]];
}


#line 37
- (IOSByteArray *)serializeWithDKKeyValueItem:(AMUser *)raw {
  return [((AMUser *) nil_chk(raw)) toByteArray];
}


#line 42
- (AMUser *)deserializeWithByteArray:(IOSByteArray *)raw {
  
#line 43
  @try {
    return AMUser_fromBytesWithByteArray_(raw);
  }
  @catch (
#line 45
  JavaIoIOException *e) {
    [((JavaIoIOException *) nil_chk(e)) printStackTrace];
    return nil;
  }
}

- (instancetype)initWithImActorModelModulesUsers:(ImActorModelModulesUsers *)outer$
                           withDKKeyValueStorage:(id<DKKeyValueStorage>)arg$0 {
  this$0_ = outer$;
  return [super initWithDKKeyValueStorage:arg$0];
}

- (void)copyAllFieldsTo:(ImActorModelModulesUsers_$1 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesUsers_$1)

@implementation ImActorModelModulesUsers_$2


#line 65
- (void)startWithAMCommandCallback:(id<AMCommandCallback>)callback {
  
#line 66
  [this$0_ requestWithImActorModelNetworkParserRequest:[[ImActorModelApiRpcRequestEditName alloc] initWithNSString:val$newName_] withAMRpcCallback:[[ImActorModelModulesUsers_$2_$1 alloc] initWithImActorModelModulesUsers_$2:self withAMCommandCallback:callback]];
}

- (instancetype)initWithImActorModelModulesUsers:(ImActorModelModulesUsers *)outer$
                                    withNSString:(NSString *)capture$0 {
  this$0_ = outer$;
  val$newName_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesUsers_$2 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$newName_ = val$newName_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesUsers_$2)

@implementation ImActorModelModulesUsers_$2_$1


#line 68
- (void)onResultWithImActorModelNetworkParserResponse:(ImActorModelApiRpcResponseSeq *)response {
  
#line 69
  ImActorModelApiBaseSeqUpdate *update = [[ImActorModelApiBaseSeqUpdate alloc] initWithInt:[((ImActorModelApiRpcResponseSeq *) nil_chk(response)) getSeq] withByteArray:[response getState] withInt:
#line 70
  ImActorModelApiUpdatesUpdateUserNameChanged_HEADER withByteArray:[((ImActorModelApiUpdatesUpdateUserNameChanged *) [[ImActorModelApiUpdatesUpdateUserNameChanged alloc] initWithInt:[this$0_->this$0_ myUid] withNSString:this$0_->val$newName_]) toByteArray]];
  
#line 72
  [((ImActorModelModulesUpdates *) nil_chk([this$0_->this$0_ updates])) onUpdateReceivedWithId:update];
  [this$0_->this$0_ runOnUiThreadWithJavaLangRunnable:[[ImActorModelModulesUsers_$2_$1_$1 alloc] initWithImActorModelModulesUsers_$2_$1:self]];
}


#line 82
- (void)onErrorWithAMRpcException:(AMRpcException *)e {
  
#line 83
  [this$0_->this$0_ runOnUiThreadWithJavaLangRunnable:[[ImActorModelModulesUsers_$2_$1_$2 alloc] initWithImActorModelModulesUsers_$2_$1:self withAMRpcException:e]];
}

- (instancetype)initWithImActorModelModulesUsers_$2:(ImActorModelModulesUsers_$2 *)outer$
                              withAMCommandCallback:(id<AMCommandCallback>)capture$0 {
  this$0_ = outer$;
  val$callback_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesUsers_$2_$1 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$callback_ = val$callback_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesUsers_$2_$1)

@implementation ImActorModelModulesUsers_$2_$1_$1


#line 75
- (void)run {
  
#line 76
  [((id<AMCommandCallback>) nil_chk(this$0_->val$callback_)) onResultWithId:JavaLangBoolean_valueOfWithBoolean_(YES)];
}

- (instancetype)initWithImActorModelModulesUsers_$2_$1:(ImActorModelModulesUsers_$2_$1 *)outer$ {
  this$0_ = outer$;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesUsers_$2_$1_$1 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesUsers_$2_$1_$1)

@implementation ImActorModelModulesUsers_$2_$1_$2


#line 85
- (void)run {
  
#line 86
  [((id<AMCommandCallback>) nil_chk(this$0_->val$callback_)) onErrorWithJavaLangException:val$e_];
}

- (instancetype)initWithImActorModelModulesUsers_$2_$1:(ImActorModelModulesUsers_$2_$1 *)outer$
                                    withAMRpcException:(AMRpcException *)capture$0 {
  this$0_ = outer$;
  val$e_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesUsers_$2_$1_$2 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$e_ = val$e_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesUsers_$2_$1_$2)

@implementation ImActorModelModulesUsers_$3


#line 98
- (void)startWithAMCommandCallback:(id<AMCommandCallback>)callback {
  
#line 99
  AMUser *user = [((id<DKKeyValueEngine>) nil_chk([this$0_ getUsers])) getValueWithLong:val$uid_];
  if (user == nil) {
    [this$0_ runOnUiThreadWithJavaLangRunnable:[[ImActorModelModulesUsers_$3_$1 alloc] initWithAMCommandCallback:callback]];
    
#line 107
    return;
  }
  [this$0_ requestWithImActorModelNetworkParserRequest:[[ImActorModelApiRpcRequestEditUserLocalName alloc] initWithInt:
#line 110
  [((AMUser *) nil_chk(user)) getUid] withLong:[user getAccessHash] withNSString:val$name_] withAMRpcCallback:[[ImActorModelModulesUsers_$3_$2 alloc] initWithImActorModelModulesUsers_$3:self withAMCommandCallback:callback]];
}

- (instancetype)initWithImActorModelModulesUsers:(ImActorModelModulesUsers *)outer$
                                         withInt:(jint)capture$0
                                    withNSString:(NSString *)capture$1 {
  this$0_ = outer$;
  val$uid_ = capture$0;
  val$name_ = capture$1;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesUsers_$3 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$uid_ = val$uid_;
  other->val$name_ = val$name_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesUsers_$3)

@implementation ImActorModelModulesUsers_$3_$1


#line 103
- (void)run {
  
#line 104
  [((id<AMCommandCallback>) nil_chk(val$callback_)) onErrorWithJavaLangException:[[AMRpcInternalException alloc] init]];
}

- (instancetype)initWithAMCommandCallback:(id<AMCommandCallback>)capture$0 {
  val$callback_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesUsers_$3_$1 *)other {
  [super copyAllFieldsTo:other];
  other->val$callback_ = val$callback_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesUsers_$3_$1)

@implementation ImActorModelModulesUsers_$3_$2


#line 112
- (void)onResultWithImActorModelNetworkParserResponse:(ImActorModelApiRpcResponseSeq *)response {
  
#line 113
  ImActorModelApiBaseSeqUpdate *update = [[ImActorModelApiBaseSeqUpdate alloc] initWithInt:[((ImActorModelApiRpcResponseSeq *) nil_chk(response)) getSeq] withByteArray:[response getState] withInt:
#line 114
  ImActorModelApiUpdatesUpdateUserLocalNameChanged_HEADER withByteArray:[((ImActorModelApiUpdatesUpdateUserLocalNameChanged *) [[ImActorModelApiUpdatesUpdateUserLocalNameChanged alloc] initWithInt:this$0_->val$uid_ withNSString:this$0_->val$name_]) toByteArray]];
  
#line 116
  [((ImActorModelModulesUpdates *) nil_chk([this$0_->this$0_ updates])) onUpdateReceivedWithId:update];
  [this$0_->this$0_ runOnUiThreadWithJavaLangRunnable:[[ImActorModelModulesUsers_$3_$2_$1 alloc] initWithImActorModelModulesUsers_$3_$2:self]];
}


#line 126
- (void)onErrorWithAMRpcException:(AMRpcException *)e {
  
#line 127
  [this$0_->this$0_ runOnUiThreadWithJavaLangRunnable:[[ImActorModelModulesUsers_$3_$2_$2 alloc] initWithImActorModelModulesUsers_$3_$2:self]];
}

- (instancetype)initWithImActorModelModulesUsers_$3:(ImActorModelModulesUsers_$3 *)outer$
                              withAMCommandCallback:(id<AMCommandCallback>)capture$0 {
  this$0_ = outer$;
  val$callback_ = capture$0;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesUsers_$3_$2 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->val$callback_ = val$callback_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesUsers_$3_$2)

@implementation ImActorModelModulesUsers_$3_$2_$1


#line 119
- (void)run {
  
#line 120
  [((id<AMCommandCallback>) nil_chk(this$0_->val$callback_)) onResultWithId:JavaLangBoolean_valueOfWithBoolean_(YES)];
}

- (instancetype)initWithImActorModelModulesUsers_$3_$2:(ImActorModelModulesUsers_$3_$2 *)outer$ {
  this$0_ = outer$;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesUsers_$3_$2_$1 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesUsers_$3_$2_$1)

@implementation ImActorModelModulesUsers_$3_$2_$2


#line 129
- (void)run {
  
#line 130
  [((id<AMCommandCallback>) nil_chk(this$0_->val$callback_)) onErrorWithJavaLangException:[[AMRpcInternalException alloc] init]];
}

- (instancetype)initWithImActorModelModulesUsers_$3_$2:(ImActorModelModulesUsers_$3_$2 *)outer$ {
  this$0_ = outer$;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesUsers_$3_$2_$2 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesUsers_$3_$2_$2)
