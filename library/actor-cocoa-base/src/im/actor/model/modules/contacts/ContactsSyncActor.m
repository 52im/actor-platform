//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/modules/contacts/ContactsSyncActor.java
//

#line 1 "/Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/modules/contacts/ContactsSyncActor.java"

#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "im/actor/model/Configuration.h"
#include "im/actor/model/api/User.h"
#include "im/actor/model/api/rpc/RequestGetContacts.h"
#include "im/actor/model/api/rpc/ResponseGetContacts.h"
#include "im/actor/model/crypto/CryptoUtils.h"
#include "im/actor/model/droidkit/actors/Actor.h"
#include "im/actor/model/droidkit/actors/ActorRef.h"
#include "im/actor/model/droidkit/bser/DataInput.h"
#include "im/actor/model/droidkit/bser/DataOutput.h"
#include "im/actor/model/droidkit/engine/ListEngine.h"
#include "im/actor/model/droidkit/engine/PreferencesStorage.h"
#include "im/actor/model/entity/Avatar.h"
#include "im/actor/model/entity/Contact.h"
#include "im/actor/model/entity/User.h"
#include "im/actor/model/log/Log.h"
#include "im/actor/model/modules/AppStateModule.h"
#include "im/actor/model/modules/Contacts.h"
#include "im/actor/model/modules/Modules.h"
#include "im/actor/model/modules/Updates.h"
#include "im/actor/model/modules/contacts/ContactsSyncActor.h"
#include "im/actor/model/modules/updates/internal/ContactsLoaded.h"
#include "im/actor/model/modules/utils/ModuleActor.h"
#include "im/actor/model/mvvm/ValueModel.h"
#include "im/actor/model/network/RpcException.h"
#include "im/actor/model/viewmodel/UserVM.h"
#include "java/io/IOException.h"
#include "java/io/UnsupportedEncodingException.h"
#include "java/lang/Boolean.h"
#include "java/lang/Integer.h"
#include "java/util/ArrayList.h"
#include "java/util/Arrays.h"
#include "java/util/Collections.h"
#include "java/util/List.h"

__attribute__((unused)) static void ImActorModelModulesContactsContactsSyncActor_updateEngineList(ImActorModelModulesContactsContactsSyncActor *self);
__attribute__((unused)) static void ImActorModelModulesContactsContactsSyncActor_saveList(ImActorModelModulesContactsContactsSyncActor *self);
__attribute__((unused)) static void ImActorModelModulesContactsContactsSyncActor_notifyState(ImActorModelModulesContactsContactsSyncActor *self);

@interface ImActorModelModulesContactsContactsSyncActor () {
 @public
  jboolean ENABLE_LOG_;
  JavaUtilArrayList *contacts_;
  jboolean isInProgress_;
  jboolean isInvalidated_;
}

- (void)updateEngineList;

- (void)saveList;

- (void)notifyState;
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesContactsContactsSyncActor, contacts_, JavaUtilArrayList *)

@interface ImActorModelModulesContactsContactsSyncActor_PerformSync ()
- (instancetype)init;
@end

@interface ImActorModelModulesContactsContactsSyncActor_ContactsLoaded () {
 @public
  ImActorModelApiRpcResponseGetContacts *result_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesContactsContactsSyncActor_ContactsLoaded, result_, ImActorModelApiRpcResponseGetContacts *)

@interface ImActorModelModulesContactsContactsSyncActor_ContactsAdded () {
 @public
  IOSIntArray *uids_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesContactsContactsSyncActor_ContactsAdded, uids_, IOSIntArray *)

@interface ImActorModelModulesContactsContactsSyncActor_ContactsRemoved () {
 @public
  IOSIntArray *uids_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesContactsContactsSyncActor_ContactsRemoved, uids_, IOSIntArray *)

@interface ImActorModelModulesContactsContactsSyncActor_UserChanged () {
 @public
  AMUser *user_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesContactsContactsSyncActor_UserChanged, user_, AMUser *)

@interface ImActorModelModulesContactsContactsSyncActor_$1 () {
 @public
  ImActorModelModulesContactsContactsSyncActor *this$0_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesContactsContactsSyncActor_$1, this$0_, ImActorModelModulesContactsContactsSyncActor *)


#line 27
@implementation ImActorModelModulesContactsContactsSyncActor

NSString * ImActorModelModulesContactsContactsSyncActor_TAG_ = @"ContactsServerSync";


#line 38
- (instancetype)initWithImActorModelModulesModules:(ImActorModelModulesModules *)messenger {
  if (self =
#line 39
  [super initWithImActorModelModulesModules:messenger]) {
    contacts_ =
#line 33
    [[JavaUtilArrayList alloc] init];
    isInProgress_ =
#line 35
    NO;
    isInvalidated_ =
#line 36
    NO;
    
#line 40
    ENABLE_LOG_ = [((AMConfiguration *) nil_chk([((ImActorModelModulesModules *) nil_chk(messenger)) getConfiguration])) isEnableContactsLogging];
  }
  return self;
}


#line 44
- (void)preStart {
  
#line 45
  [super preStart];
  if (ENABLE_LOG_) {
    AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, @"Loading contacts ids from storage...");
  }
  IOSByteArray *data = [((id<DKPreferencesStorage>) nil_chk([self preferences])) getBytes:@"contact_list"];
  if (data != nil) {
    @try {
      BSDataInput *dataInput = [[BSDataInput alloc] initWithByteArray:data withInt:0 withInt:data->size_];
      jint count = [dataInput readInt];
      for (jint i = 0; i < count; i++) {
        [((JavaUtilArrayList *) nil_chk(contacts_)) addWithId:JavaLangInteger_valueOfWithInt_([dataInput readInt])];
      }
    }
    @catch (
#line 57
    JavaIoIOException *e) {
      [((JavaIoIOException *) nil_chk(e)) printStackTrace];
    }
  }
  ImActorModelModulesContactsContactsSyncActor_notifyState(self);
  [((DKActorRef *) nil_chk([self self__])) sendWithId:[[ImActorModelModulesContactsContactsSyncActor_PerformSync alloc] init]];
}


#line 65
- (void)performSync {
  
#line 66
  if (ENABLE_LOG_) {
    AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, @"Checking sync");
  }
  
#line 70
  if (isInProgress_) {
    if (ENABLE_LOG_) {
      AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, @"Sync in progress, invalidating current sync");
    }
    isInvalidated_ = YES;
    return;
  }
  isInProgress_ = YES;
  isInvalidated_ = NO;
  
#line 80
  if (ENABLE_LOG_) {
    AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, @"Starting sync");
  }
  
#line 84
  IOSObjectArray *uids = [((JavaUtilArrayList *) nil_chk(contacts_)) toArrayWithNSObjectArray:[IOSObjectArray newArrayWithLength:0 type:JavaLangInteger_class_()]];
  JavaUtilArrays_sortWithNSObjectArray_(uids);
  NSString *hash_ = @"";
  {
    IOSObjectArray *a__ =
#line 87
    uids;
    JavaLangInteger * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    JavaLangInteger * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      jlong u = [((JavaLangInteger *) nil_chk(*b__++)) intValue];
      
#line 88
      if (((jint) [hash_ length]) != 0) {
        hash_ = JreStrcat("$C", hash_, ',');
      }
      hash_ = JreStrcat("$J", hash_, u);
    }
  }
  
#line 93
  IOSByteArray *hashData;
  @try {
    hashData = [hash_ getBytesWithCharsetName:@"UTF-8"];
  }
  @catch (
#line 96
  JavaIoUnsupportedEncodingException *e) {
    [((JavaIoUnsupportedEncodingException *) nil_chk(e)) printStackTrace];
    return;
  }
  NSString *hashValue = AMCryptoUtils_hexWithByteArray_(AMCryptoUtils_SHA256WithByteArray_(hashData));
  
#line 102
  AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, JreStrcat("$$", @"Performing sync with uids: ", hash_));
  AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, JreStrcat("$$$I", @"Performing sync with hash: ", hashValue, @", hashData:", ((IOSByteArray *) nil_chk(hashData))->size_));
  
#line 105
  [self requestWithImActorModelNetworkParserRequest:[[ImActorModelApiRpcRequestGetContacts alloc] initWithNSString:hashValue] withAMRpcCallback:[[ImActorModelModulesContactsContactsSyncActor_$1 alloc] initWithImActorModelModulesContactsContactsSyncActor:self]];
}


#line 120
- (void)onContactsLoadedWithImActorModelApiRpcResponseGetContacts:(ImActorModelApiRpcResponseGetContacts *)result {
  
#line 121
  if (ENABLE_LOG_) {
    AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, @"Sync result received");
  }
  
#line 125
  isInProgress_ = NO;
  
#line 127
  [((ImActorModelModulesAppStateModule *) nil_chk([((ImActorModelModulesModules *) nil_chk([self modules])) getAppStateModule])) onContactsLoaded];
  
#line 129
  if ([((ImActorModelApiRpcResponseGetContacts *) nil_chk(result)) isNotChanged]) {
    AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, @"Sync: Not changed");
    if (isInvalidated_) {
      [self performSync];
    }
    else {
    }
    return;
  }
  
#line 139
  if (ENABLE_LOG_) {
    AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, JreStrcat("$I$", @"Sync received ", [((id<JavaUtilList>) nil_chk([result getUsers])) size], @" contacts"));
  }
  {
    IOSObjectArray *a__ =
#line 144
    [contacts_ toArrayWithNSObjectArray:[IOSObjectArray newArrayWithLength:[((JavaUtilArrayList *) nil_chk(contacts_)) size] type:JavaLangInteger_class_()]];
    JavaLangInteger * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    JavaLangInteger * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      JavaLangInteger *uid = *b__++;
      {
        
#line 145
        for (ImActorModelApiUser * __strong u in nil_chk([result getUsers])) {
          if ([((ImActorModelApiUser *) nil_chk(u)) getId] == [((JavaLangInteger *) nil_chk(uid)) intValue]) {
            goto continue_outer;
          }
        }
        if (ENABLE_LOG_) {
          AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, JreStrcat("$@", @"Removing: #", uid));
        }
        [contacts_ removeWithId:(JavaLangInteger *) check_class_cast(uid, [JavaLangInteger class])];
        if ([self getUserWithInt:[((JavaLangInteger *) nil_chk(uid)) intValue]] != nil) {
          [((AMValueModel *) nil_chk([((AMUserVM *) nil_chk([self getUserVMWithInt:[uid intValue]])) isContact])) changeWithId:JavaLangBoolean_valueOfWithBoolean_(NO)];
        }
        [((ImActorModelModulesContacts *) nil_chk([((ImActorModelModulesModules *) nil_chk([self modules])) getContactsModule])) markNonContactWithInt:[uid intValue]];
      }
      continue_outer: ;
    }
  }
  
#line 159
  for (ImActorModelApiUser * __strong u in nil_chk([result getUsers])) {
    if ([contacts_ containsWithId:JavaLangInteger_valueOfWithInt_([((ImActorModelApiUser *) nil_chk(u)) getId])]) {
      continue;
    }
    if (ENABLE_LOG_) {
      AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, JreStrcat("$I", @"Adding: #", [u getId]));
    }
    [contacts_ addWithId:JavaLangInteger_valueOfWithInt_([u getId])];
    if ([self getUserWithInt:[u getId]] != nil) {
      [((AMValueModel *) nil_chk([((AMUserVM *) nil_chk([self getUserVMWithInt:[u getId]])) isContact])) changeWithId:JavaLangBoolean_valueOfWithBoolean_(YES)];
    }
    [((ImActorModelModulesContacts *) nil_chk([((ImActorModelModulesModules *) nil_chk([self modules])) getContactsModule])) markContactWithInt:[u getId]];
  }
  ImActorModelModulesContactsContactsSyncActor_saveList(self);
  
#line 174
  ImActorModelModulesContactsContactsSyncActor_updateEngineList(self);
  
#line 176
  if (isInvalidated_) {
    [((DKActorRef *) nil_chk([self self__])) sendWithId:[[ImActorModelModulesContactsContactsSyncActor_PerformSync alloc] init]];
  }
}


#line 181
- (void)onContactsAddedWithIntArray:(IOSIntArray *)uids {
  
#line 182
  if (ENABLE_LOG_) {
    AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, @"OnContactsAdded received");
  }
  {
    IOSIntArray *a__ = uids;
    jint const *b__ = ((IOSIntArray *) nil_chk(a__))->buffer_;
    jint const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      jint uid = *b__++;
      
#line 187
      if (ENABLE_LOG_) {
        AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, JreStrcat("$I", @"Adding: #", uid));
      }
      [((JavaUtilArrayList *) nil_chk(contacts_)) addWithId:JavaLangInteger_valueOfWithInt_(uid)];
      [((ImActorModelModulesContacts *) nil_chk([((ImActorModelModulesModules *) nil_chk([self modules])) getContactsModule])) markContactWithInt:uid];
      [((AMValueModel *) nil_chk([((AMUserVM *) nil_chk([self getUserVMWithInt:uid])) isContact])) changeWithId:JavaLangBoolean_valueOfWithBoolean_(YES)];
    }
  }
  
#line 194
  ImActorModelModulesContactsContactsSyncActor_saveList(self);
  
#line 196
  ImActorModelModulesContactsContactsSyncActor_updateEngineList(self);
  
#line 198
  [((DKActorRef *) nil_chk([self self__])) sendWithId:[[ImActorModelModulesContactsContactsSyncActor_PerformSync alloc] init]];
}


#line 201
- (void)onContactsRemovedWithIntArray:(IOSIntArray *)uids {
  
#line 202
  if (ENABLE_LOG_) {
    AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, @"OnContactsRemoved received");
  }
  {
    IOSIntArray *a__ = uids;
    jint const *b__ = ((IOSIntArray *) nil_chk(a__))->buffer_;
    jint const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      jint uid = *b__++;
      
#line 207
      AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, JreStrcat("$I", @"Removing: #", uid));
      [((JavaUtilArrayList *) nil_chk(contacts_)) removeWithId:JavaLangInteger_valueOfWithInt_(uid)];
      [((ImActorModelModulesContacts *) nil_chk([((ImActorModelModulesModules *) nil_chk([self modules])) getContactsModule])) markNonContactWithInt:uid];
      [((AMValueModel *) nil_chk([((AMUserVM *) nil_chk([self getUserVMWithInt:uid])) isContact])) changeWithId:JavaLangBoolean_valueOfWithBoolean_(NO)];
    }
  }
  
#line 212
  ImActorModelModulesContactsContactsSyncActor_saveList(self);
  
#line 214
  ImActorModelModulesContactsContactsSyncActor_updateEngineList(self);
  
#line 216
  [((DKActorRef *) nil_chk([self self__])) sendWithId:[[ImActorModelModulesContactsContactsSyncActor_PerformSync alloc] init]];
}


#line 219
- (void)onUserChangedWithAMUser:(AMUser *)user {
  
#line 220
  if (ENABLE_LOG_) {
    AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, JreStrcat("$I$", @"OnUserChanged #", [((AMUser *) nil_chk(user)) getUid], @" received"));
  }
  
#line 224
  if (![((JavaUtilArrayList *) nil_chk(contacts_)) containsWithId:JavaLangInteger_valueOfWithInt_([((AMUser *) nil_chk(user)) getUid])]) {
    return;
  }
  
#line 228
  ImActorModelModulesContactsContactsSyncActor_updateEngineList(self);
}


#line 231
- (void)updateEngineList {
  ImActorModelModulesContactsContactsSyncActor_updateEngineList(self);
}


#line 260
- (void)saveList {
  ImActorModelModulesContactsContactsSyncActor_saveList(self);
}


#line 272
- (void)notifyState {
  ImActorModelModulesContactsContactsSyncActor_notifyState(self);
}


#line 277
- (void)onReceiveWithId:(id)message {
  
#line 278
  if ([message isKindOfClass:[ImActorModelModulesContactsContactsSyncActor_ContactsLoaded class]]) {
    [self onContactsLoadedWithImActorModelApiRpcResponseGetContacts:[((ImActorModelModulesContactsContactsSyncActor_ContactsLoaded *) nil_chk(((ImActorModelModulesContactsContactsSyncActor_ContactsLoaded *) check_class_cast(message, [ImActorModelModulesContactsContactsSyncActor_ContactsLoaded class])))) getResult]];
  }
  else
#line 280
  if ([message isKindOfClass:[ImActorModelModulesContactsContactsSyncActor_ContactsAdded class]]) {
    [self onContactsAddedWithIntArray:[((ImActorModelModulesContactsContactsSyncActor_ContactsAdded *) nil_chk(((ImActorModelModulesContactsContactsSyncActor_ContactsAdded *) check_class_cast(message, [ImActorModelModulesContactsContactsSyncActor_ContactsAdded class])))) getUids]];
  }
  else
#line 282
  if ([message isKindOfClass:[ImActorModelModulesContactsContactsSyncActor_ContactsRemoved class]]) {
    [self onContactsRemovedWithIntArray:[((ImActorModelModulesContactsContactsSyncActor_ContactsRemoved *) nil_chk(((ImActorModelModulesContactsContactsSyncActor_ContactsRemoved *) check_class_cast(message, [ImActorModelModulesContactsContactsSyncActor_ContactsRemoved class])))) getUids]];
  }
  else
#line 284
  if ([message isKindOfClass:[ImActorModelModulesContactsContactsSyncActor_UserChanged class]]) {
    [self onUserChangedWithAMUser:[((ImActorModelModulesContactsContactsSyncActor_UserChanged *) nil_chk(((ImActorModelModulesContactsContactsSyncActor_UserChanged *) check_class_cast(message, [ImActorModelModulesContactsContactsSyncActor_UserChanged class])))) getUser]];
  }
  else
#line 286
  if ([message isKindOfClass:[ImActorModelModulesContactsContactsSyncActor_PerformSync class]]) {
    [self performSync];
  }
  else {
    
#line 289
    [self dropWithId:message];
  }
}

- (void)copyAllFieldsTo:(ImActorModelModulesContactsContactsSyncActor *)other {
  [super copyAllFieldsTo:other];
  other->ENABLE_LOG_ = ENABLE_LOG_;
  other->contacts_ = contacts_;
  other->isInProgress_ = isInProgress_;
  other->isInvalidated_ = isInvalidated_;
}

@end

void ImActorModelModulesContactsContactsSyncActor_updateEngineList(ImActorModelModulesContactsContactsSyncActor *self) {
  
#line 232
  if (self->ENABLE_LOG_) {
    AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, @"Saving contact EngineList");
  }
  JavaUtilArrayList *userList = [[JavaUtilArrayList alloc] init];
  for (JavaLangInteger *boxed__ in nil_chk(self->contacts_)) {
    jint u = [((JavaLangInteger *) nil_chk(boxed__)) intValue];
    
#line 237
    [userList addWithId:[self getUserWithInt:u]];
  }
  JavaUtilCollections_sortWithJavaUtilList_withJavaUtilComparator_(userList, [[ImActorModelModulesContactsContactsSyncActor_$2 alloc] init]);
  
#line 246
  id<JavaUtilList> registeredContacts = [[JavaUtilArrayList alloc] init];
  jint index = -1;
  for (AMUser * __strong userModel in userList) {
    AMContact *contact = [[AMContact alloc] initWithInt:[((AMUser *) nil_chk(userModel)) getUid] withLong:
#line 250
    (jlong) index-- withAMAvatar:
#line 251
    [userModel getAvatar] withNSString:
#line 252
    [userModel getName]];
    [registeredContacts addWithId:contact];
  }
  [((id<DKListEngine>) nil_chk([((ImActorModelModulesContacts *) nil_chk([((ImActorModelModulesModules *) nil_chk([self modules])) getContactsModule])) getContacts])) replaceItemsWithJavaUtilList:registeredContacts];
  
#line 257
  ImActorModelModulesContactsContactsSyncActor_notifyState(self);
}

void ImActorModelModulesContactsContactsSyncActor_saveList(ImActorModelModulesContactsContactsSyncActor *self) {
  
#line 261
  if (self->ENABLE_LOG_) {
    AMLog_dWithNSString_withNSString_(ImActorModelModulesContactsContactsSyncActor_TAG_, @"Saving contacts ids to storage");
  }
  BSDataOutput *dataOutput = [[BSDataOutput alloc] init];
  [dataOutput writeIntWithInt:[((JavaUtilArrayList *) nil_chk(self->contacts_)) size]];
  for (JavaLangInteger *boxed__ in self->contacts_) {
    jint l = [((JavaLangInteger *) nil_chk(boxed__)) intValue];
    
#line 267
    [dataOutput writeIntWithInt:l];
  }
  [((id<DKPreferencesStorage>) nil_chk([self preferences])) putBytes:@"contact_list" withValue:[dataOutput toByteArray]];
}

void ImActorModelModulesContactsContactsSyncActor_notifyState(ImActorModelModulesContactsContactsSyncActor *self) {
  
#line 273
  [((ImActorModelModulesAppStateModule *) nil_chk([((ImActorModelModulesModules *) nil_chk([self modules])) getAppStateModule])) onContactsUpdateWithBoolean:[((id<DKListEngine>) nil_chk([((ImActorModelModulesContacts *) nil_chk([((ImActorModelModulesModules *) nil_chk([self modules])) getContactsModule])) getContacts])) isEmpty]];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesContactsContactsSyncActor)


#line 293
@implementation ImActorModelModulesContactsContactsSyncActor_PerformSync

- (instancetype)init {
  return [super init];
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesContactsContactsSyncActor_PerformSync)


#line 297
@implementation ImActorModelModulesContactsContactsSyncActor_ContactsLoaded


#line 300
- (instancetype)initWithImActorModelApiRpcResponseGetContacts:(ImActorModelApiRpcResponseGetContacts *)result {
  if (self = [super init]) {
    
#line 301
    self->result_ = result;
  }
  return self;
}


#line 304
- (ImActorModelApiRpcResponseGetContacts *)getResult {
  
#line 305
  return result_;
}

- (void)copyAllFieldsTo:(ImActorModelModulesContactsContactsSyncActor_ContactsLoaded *)other {
  [super copyAllFieldsTo:other];
  other->result_ = result_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesContactsContactsSyncActor_ContactsLoaded)


#line 309
@implementation ImActorModelModulesContactsContactsSyncActor_ContactsAdded


#line 312
- (instancetype)initWithIntArray:(IOSIntArray *)uids {
  if (self = [super init]) {
    
#line 313
    self->uids_ = uids;
  }
  return self;
}


#line 316
- (IOSIntArray *)getUids {
  
#line 317
  return uids_;
}

- (void)copyAllFieldsTo:(ImActorModelModulesContactsContactsSyncActor_ContactsAdded *)other {
  [super copyAllFieldsTo:other];
  other->uids_ = uids_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesContactsContactsSyncActor_ContactsAdded)


#line 321
@implementation ImActorModelModulesContactsContactsSyncActor_ContactsRemoved


#line 324
- (instancetype)initWithIntArray:(IOSIntArray *)uids {
  if (self = [super init]) {
    
#line 325
    self->uids_ = uids;
  }
  return self;
}


#line 328
- (IOSIntArray *)getUids {
  
#line 329
  return uids_;
}

- (void)copyAllFieldsTo:(ImActorModelModulesContactsContactsSyncActor_ContactsRemoved *)other {
  [super copyAllFieldsTo:other];
  other->uids_ = uids_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesContactsContactsSyncActor_ContactsRemoved)


#line 333
@implementation ImActorModelModulesContactsContactsSyncActor_UserChanged


#line 336
- (instancetype)initWithAMUser:(AMUser *)user {
  if (self = [super init]) {
    
#line 337
    self->user_ = user;
  }
  return self;
}


#line 340
- (AMUser *)getUser {
  
#line 341
  return user_;
}

- (void)copyAllFieldsTo:(ImActorModelModulesContactsContactsSyncActor_UserChanged *)other {
  [super copyAllFieldsTo:other];
  other->user_ = user_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesContactsContactsSyncActor_UserChanged)

@implementation ImActorModelModulesContactsContactsSyncActor_$1


#line 107
- (void)onResultWithImActorModelNetworkParserResponse:(ImActorModelApiRpcResponseGetContacts *)response {
  
#line 108
  [((ImActorModelModulesUpdates *) nil_chk([this$0_ updates])) onUpdateReceivedWithId:
#line 109
  [[ImActorModelModulesUpdatesInternalContactsLoaded alloc] initWithImActorModelApiRpcResponseGetContacts:response]];
}


#line 113
- (void)onErrorWithAMRpcException:(AMRpcException *)e {
  
#line 114
  this$0_->isInProgress_ = NO;
  [((AMRpcException *) nil_chk(e)) printStackTrace];
}

- (instancetype)initWithImActorModelModulesContactsContactsSyncActor:(ImActorModelModulesContactsContactsSyncActor *)outer$ {
  this$0_ = outer$;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesContactsContactsSyncActor_$1 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesContactsContactsSyncActor_$1)

@implementation ImActorModelModulesContactsContactsSyncActor_$2


#line 241
- (jint)compareWithId:(AMUser *)lhs
               withId:(AMUser *)rhs {
  
#line 242
  return [((NSString *) nil_chk([((AMUser *) nil_chk(lhs)) getName])) compareToWithId:[((AMUser *) nil_chk(rhs)) getName]];
}

- (instancetype)init {
  return [super init];
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesContactsContactsSyncActor_$2)
