//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/modules/search/SearchActor.java
//

#line 1 "/Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/modules/search/SearchActor.java"

#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "im/actor/model/droidkit/actors/Actor.h"
#include "im/actor/model/droidkit/engine/KeyValueEngine.h"
#include "im/actor/model/droidkit/engine/ListEngine.h"
#include "im/actor/model/entity/Avatar.h"
#include "im/actor/model/entity/Dialog.h"
#include "im/actor/model/entity/Peer.h"
#include "im/actor/model/entity/SearchEntity.h"
#include "im/actor/model/entity/User.h"
#include "im/actor/model/modules/Modules.h"
#include "im/actor/model/modules/SearchModule.h"
#include "im/actor/model/modules/search/SearchActor.h"
#include "im/actor/model/modules/utils/ModuleActor.h"
#include "java/util/ArrayList.h"
#include "java/util/List.h"

__attribute__((unused)) static void ImActorModelModulesSearchSearchActor_onDialogsUpdatedWithJavaUtilList_(ImActorModelModulesSearchSearchActor *self, id<JavaUtilList> dialogs);
__attribute__((unused)) static void ImActorModelModulesSearchSearchActor_onContactsUpdatedWithIntArray_(ImActorModelModulesSearchSearchActor *self, IOSIntArray *contactsList);

@interface ImActorModelModulesSearchSearchActor () {
 @public
  id<DKListEngine> listEngine_;
}

- (void)onDialogsUpdatedWithJavaUtilList:(id<JavaUtilList>)dialogs;

- (void)onContactsUpdatedWithIntArray:(IOSIntArray *)contactsList;
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesSearchSearchActor, listEngine_, id<DKListEngine>)

@interface ImActorModelModulesSearchSearchActor_OnDialogsUpdated () {
 @public
  id<JavaUtilList> dialogs_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesSearchSearchActor_OnDialogsUpdated, dialogs_, id<JavaUtilList>)

@interface ImActorModelModulesSearchSearchActor_OnContactsUpdated () {
 @public
  IOSIntArray *contactsList_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesSearchSearchActor_OnContactsUpdated, contactsList_, IOSIntArray *)


#line 17
@implementation ImActorModelModulesSearchSearchActor


#line 23
- (instancetype)initWithImActorModelModulesModules:(ImActorModelModulesModules *)modules {
  return
#line 24
  [super initWithImActorModelModulesModules:modules];
}


#line 28
- (void)preStart {
  [super preStart];
  
#line 31
  listEngine_ = [((ImActorModelModulesSearchModule *) nil_chk([((ImActorModelModulesModules *) nil_chk([self modules])) getSearch])) getSearchList];
}


#line 34
- (void)onDialogsUpdatedWithJavaUtilList:(id<JavaUtilList>)dialogs {
  ImActorModelModulesSearchSearchActor_onDialogsUpdatedWithJavaUtilList_(self, dialogs);
}


#line 43
- (void)onContactsUpdatedWithIntArray:(IOSIntArray *)contactsList {
  ImActorModelModulesSearchSearchActor_onContactsUpdatedWithIntArray_(self, contactsList);
}


#line 54
- (void)onReceiveWithId:(id)message {
  
#line 55
  if ([message isKindOfClass:[ImActorModelModulesSearchSearchActor_OnDialogsUpdated class]]) {
    ImActorModelModulesSearchSearchActor_OnDialogsUpdated *onDialogsUpdated = (ImActorModelModulesSearchSearchActor_OnDialogsUpdated *) check_class_cast(message, [ImActorModelModulesSearchSearchActor_OnDialogsUpdated class]);
    ImActorModelModulesSearchSearchActor_onDialogsUpdatedWithJavaUtilList_(self, [((ImActorModelModulesSearchSearchActor_OnDialogsUpdated *) nil_chk(onDialogsUpdated)) getDialogs]);
  }
  else
#line 58
  if ([message isKindOfClass:[ImActorModelModulesSearchSearchActor_OnContactsUpdated class]]) {
    ImActorModelModulesSearchSearchActor_OnContactsUpdated *contactsUpdated = (ImActorModelModulesSearchSearchActor_OnContactsUpdated *) check_class_cast(message, [ImActorModelModulesSearchSearchActor_OnContactsUpdated class]);
    ImActorModelModulesSearchSearchActor_onContactsUpdatedWithIntArray_(self, [((ImActorModelModulesSearchSearchActor_OnContactsUpdated *) nil_chk(contactsUpdated)) getContactsList]);
  }
  else {
    
#line 62
    [self dropWithId:message];
  }
}

- (void)copyAllFieldsTo:(ImActorModelModulesSearchSearchActor *)other {
  [super copyAllFieldsTo:other];
  other->listEngine_ = listEngine_;
}

@end

void ImActorModelModulesSearchSearchActor_onDialogsUpdatedWithJavaUtilList_(ImActorModelModulesSearchSearchActor *self, id<JavaUtilList> dialogs) {
  
#line 35
  id<JavaUtilList> updated = [[JavaUtilArrayList alloc] init];
  for (AMDialog * __strong d in nil_chk(dialogs)) {
    [updated addWithId:[[AMSearchEntity alloc] initWithAMPeer:[((AMDialog *) nil_chk(d)) getPeer] withLong:[d getSortDate] withAMAvatar:[d getDialogAvatar] withNSString:
#line 38
    [d getDialogTitle]]];
  }
  [((id<DKListEngine>) nil_chk(self->listEngine_)) addOrUpdateItemsWithJavaUtilList:updated];
}

void ImActorModelModulesSearchSearchActor_onContactsUpdatedWithIntArray_(ImActorModelModulesSearchSearchActor *self, IOSIntArray *contactsList) {
  
#line 44
  id<JavaUtilList> updated = [[JavaUtilArrayList alloc] init];
  for (jint i = 0; i < ((IOSIntArray *) nil_chk(contactsList))->size_; i++) {
    AMUser *user = [((id<DKKeyValueEngine>) nil_chk([self users])) getValueWithLong:IOSIntArray_Get(contactsList, i)];
    [updated addWithId:[[AMSearchEntity alloc] initWithAMPeer:AMPeer_userWithInt_([((AMUser *) nil_chk(user)) getUid]) withLong:ImActorModelModulesSearchSearchActor_CONTACTS_PREFIX + i withAMAvatar:[user getAvatar] withNSString:
#line 48
    [user getName]]];
  }
  [((id<DKListEngine>) nil_chk(self->listEngine_)) addOrUpdateItemsWithJavaUtilList:updated];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesSearchSearchActor)


#line 66
@implementation ImActorModelModulesSearchSearchActor_OnDialogsUpdated


#line 69
- (instancetype)initWithJavaUtilList:(id<JavaUtilList>)dialogs {
  if (self = [super init]) {
    
#line 70
    self->dialogs_ = dialogs;
  }
  return self;
}


#line 73
- (id<JavaUtilList>)getDialogs {
  
#line 74
  return dialogs_;
}

- (void)copyAllFieldsTo:(ImActorModelModulesSearchSearchActor_OnDialogsUpdated *)other {
  [super copyAllFieldsTo:other];
  other->dialogs_ = dialogs_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesSearchSearchActor_OnDialogsUpdated)


#line 78
@implementation ImActorModelModulesSearchSearchActor_OnContactsUpdated


#line 81
- (instancetype)initWithIntArray:(IOSIntArray *)contactsList {
  if (self = [super init]) {
    
#line 82
    self->contactsList_ = contactsList;
  }
  return self;
}


#line 85
- (IOSIntArray *)getContactsList {
  
#line 86
  return contactsList_;
}

- (void)copyAllFieldsTo:(ImActorModelModulesSearchSearchActor_OnContactsUpdated *)other {
  [super copyAllFieldsTo:other];
  other->contactsList_ = contactsList_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesSearchSearchActor_OnContactsUpdated)
