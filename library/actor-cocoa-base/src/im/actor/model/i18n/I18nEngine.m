//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/i18n/I18nEngine.java
//

#line 1 "/Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/i18n/I18nEngine.java"

#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "im/actor/model/LocaleProvider.h"
#include "im/actor/model/droidkit/engine/KeyValueEngine.h"
#include "im/actor/model/entity/Avatar.h"
#include "im/actor/model/entity/ContentType.h"
#include "im/actor/model/entity/Message.h"
#include "im/actor/model/entity/Sex.h"
#include "im/actor/model/entity/User.h"
#include "im/actor/model/entity/content/AbsContent.h"
#include "im/actor/model/entity/content/ServiceContent.h"
#include "im/actor/model/entity/content/ServiceGroupAvatarChanged.h"
#include "im/actor/model/entity/content/ServiceGroupCreated.h"
#include "im/actor/model/entity/content/ServiceGroupTitleChanged.h"
#include "im/actor/model/entity/content/ServiceGroupUserAdded.h"
#include "im/actor/model/entity/content/ServiceGroupUserKicked.h"
#include "im/actor/model/entity/content/ServiceGroupUserLeave.h"
#include "im/actor/model/entity/content/ServiceUserRegistered.h"
#include "im/actor/model/entity/content/TextContent.h"
#include "im/actor/model/i18n/I18nEngine.h"
#include "im/actor/model/log/Log.h"
#include "im/actor/model/modules/Auth.h"
#include "im/actor/model/modules/Modules.h"
#include "im/actor/model/modules/Users.h"
#include "im/actor/model/viewmodel/UserPresence.h"
#include "java/lang/Character.h"
#include "java/util/Arrays.h"
#include "java/util/Date.h"
#include "java/util/HashMap.h"

__attribute__((unused)) static NSString *AMI18nEngine_formatTwoDigitWithInt_(AMI18nEngine *self, jint v);
__attribute__((unused)) static jboolean AMI18nEngine_areSameDaysWithLong_withLong_(jlong a, jlong b);
__attribute__((unused)) static NSString *AMI18nEngine_getTemplateNamedWithInt_withNSString_(AMI18nEngine *self, jint senderId, NSString *baseString);
__attribute__((unused)) static NSString *AMI18nEngine_getTemplateWithInt_withNSString_(AMI18nEngine *self, jint senderId, NSString *baseString);
__attribute__((unused)) static AMUser *AMI18nEngine_getUserWithInt_(AMI18nEngine *self, jint uid);

@interface AMI18nEngine () {
 @public
  ImActorModelModulesModules *modules_;
  JavaUtilHashMap *locale_;
  jboolean is24Hours_;
  IOSObjectArray *MONTHS_SHORT_;
  IOSObjectArray *MONTHS_;
}

- (NSString *)formatTwoDigitWithInt:(jint)v;

+ (jboolean)areSameDaysWithLong:(jlong)a
                       withLong:(jlong)b;

- (NSString *)getTemplateNamedWithInt:(jint)senderId
                         withNSString:(NSString *)baseString;

- (NSString *)getTemplateWithInt:(jint)senderId
                    withNSString:(NSString *)baseString;

- (AMUser *)getUserWithInt:(jint)uid;
@end

J2OBJC_FIELD_SETTER(AMI18nEngine, modules_, ImActorModelModulesModules *)
J2OBJC_FIELD_SETTER(AMI18nEngine, locale_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(AMI18nEngine, MONTHS_SHORT_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(AMI18nEngine, MONTHS_, IOSObjectArray *)


#line 29
@implementation AMI18nEngine


#line 36
- (instancetype)initWithAMLocaleProvider:(id<AMLocaleProvider>)provider
          withImActorModelModulesModules:(ImActorModelModulesModules *)modules {
  if (self = [super init]) {
    
#line 37
    self->modules_ = modules;
    
#line 38
    self->locale_ = [((id<AMLocaleProvider>) nil_chk(provider)) loadLocale];
    
#line 39
    self->is24Hours_ = [provider is24Hours];
    
#line 40
    MONTHS_SHORT_ = [IOSObjectArray newArrayWithObjects:(id[]){
#line 41
      [((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"JanShort"],
#line 42
      [locale_ getWithId:@"FebShort"],
#line 43
      [locale_ getWithId:@"MarShort"],
#line 44
      [locale_ getWithId:@"AprShort"],
#line 45
      [locale_ getWithId:@"MayShort"],
#line 46
      [locale_ getWithId:@"JunShort"],
#line 47
      [locale_ getWithId:@"JulShort"],
#line 48
      [locale_ getWithId:@"AugShort"],
#line 49
      [locale_ getWithId:@"SepShort"],
#line 50
      [locale_ getWithId:@"OctShort"],
#line 51
      [locale_ getWithId:@"NovShort"],
#line 52
      [locale_ getWithId:@"DecShort"] } count:12 type:NSString_class_()];
      
#line 55
      MONTHS_ = [IOSObjectArray newArrayWithObjects:(id[]){
#line 56
        [locale_ getWithId:@"JanFull"],
#line 57
        [locale_ getWithId:@"FebFull"],
#line 58
        [locale_ getWithId:@"MarFull"],
#line 59
        [locale_ getWithId:@"AprFull"],
#line 60
        [locale_ getWithId:@"MayFull"],
#line 61
        [locale_ getWithId:@"JunFull"],
#line 62
        [locale_ getWithId:@"JulFull"],
#line 63
        [locale_ getWithId:@"AugFull"],
#line 64
        [locale_ getWithId:@"SepFull"],
#line 65
        [locale_ getWithId:@"OctFull"],
#line 66
        [locale_ getWithId:@"NovFull"],
#line 67
        [locale_ getWithId:@"DecFull"] } count:12 type:NSString_class_()];
      }
      return self;
    }


#line 71
- (NSString *)formatTwoDigitWithInt:(jint)v {
  return AMI18nEngine_formatTwoDigitWithInt_(self, v);
}


#line 84
+ (jboolean)areSameDaysWithLong:(jlong)a
                       withLong:(jlong)b {
  return AMI18nEngine_areSameDaysWithLong_withLong_(a, b);
}


#line 97
- (NSString *)formatShortDateWithLong:(jlong)date {
  
#line 99
  jlong delta = [((JavaUtilDate *) [[JavaUtilDate alloc] init]) getTime] - date;
  if (delta < 60 * 1000) {
    return [((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"TimeShortNow"];
  }
  else
#line 102
  if (delta < 60 * 60 * 1000) {
    return [((NSString *) nil_chk([((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"TimeShortMinutes"])) replace:@"{minutes}" withSequence:JreStrcat("J", delta / 60000)];
  }
  else
#line 104
  if (delta < 24 * 60 * 60 * 1000) {
    return [((NSString *) nil_chk([((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"TimeShortHours"])) replace:@"{hours}" withSequence:JreStrcat("J", delta / 3600000)];
  }
  else
#line 106
  if (delta < 2 * 24 * 60 * 60 * 1000) {
    return [((NSString *) nil_chk([((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"TimeShortYesterday"])) replace:@"{hours}" withSequence:JreStrcat("J", delta / 3600000)];
  }
  else {
    JavaUtilDate *date1 = [[JavaUtilDate alloc] initWithLong:date];
    jint month = [date1 getMonth];
    jint d = [date1 getDate];
    return JreStrcat("IC$", d, ' ', [((NSString *) nil_chk(IOSObjectArray_Get(nil_chk(MONTHS_SHORT_), month))) uppercaseString]);
  }
}


#line 117
- (NSString *)formatTyping {
  
#line 118
  return [((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"Typing"];
}


#line 121
- (NSString *)formatTypingWithNSString:(NSString *)name {
  
#line 122
  return [((NSString *) nil_chk([((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"TypingUser"])) replace:@"{user}" withSequence:name];
}


#line 125
- (NSString *)formatTypingWithInt:(jint)count {
  
#line 126
  return [((NSString *) nil_chk([((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"TypingMultiple"])) replace:@"{count}" withSequence:NSString_valueOfWithInt_(count)];
}


#line 129
- (NSString *)formatFileSizeWithInt:(jint)bytes {
  
#line 130
  if (bytes < 0) {
    bytes = 0;
  }
  
#line 134
  if (bytes < 1024) {
    return [((NSString *) nil_chk([((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"FileB"])) replace:@"{bytes}" withSequence:JreStrcat("I", bytes)];
  }
  else
#line 136
  if (bytes < 1024 * 1024) {
    return [((NSString *) nil_chk([((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"FileKb"])) replace:@"{kbytes}" withSequence:JreStrcat("I", (bytes / 1024))];
  }
  else
#line 138
  if (bytes < 1024 * 1024 * 1024) {
    return [((NSString *) nil_chk([((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"FileMb"])) replace:@"{mbytes}" withSequence:JreStrcat("I", (bytes / (1024 * 1024)))];
  }
  else {
    
#line 141
    return [((NSString *) nil_chk([((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"FileGb"])) replace:@"{gbytes}" withSequence:JreStrcat("I", (bytes / (1024 * 1024 * 1024)))];
  }
}


#line 145
- (NSString *)formatTimeWithLong:(jlong)date {
  
#line 146
  JavaUtilDate *dateVal = [[JavaUtilDate alloc] initWithLong:date];
  if (is24Hours_) {
    return JreStrcat("IC$", [dateVal getHours], ':', AMI18nEngine_formatTwoDigitWithInt_(self, [dateVal getMinutes]));
  }
  else {
    
#line 150
    jint hours = [dateVal getHours];
    if (hours > 12) {
      return JreStrcat("IC$$", (hours - 12), ':', AMI18nEngine_formatTwoDigitWithInt_(self, [dateVal getMinutes]), @" PM");
    }
    else {
      
#line 154
      return JreStrcat("IC$$", hours, ':', AMI18nEngine_formatTwoDigitWithInt_(self, [dateVal getMinutes]), @" AM");
    }
  }
}


#line 159
- (NSString *)formatDateWithLong:(jlong)date {
  
#line 160
  JavaUtilDate *dateVal = [[JavaUtilDate alloc] initWithLong:date];
  return JreStrcat("ICIC$", [dateVal getDate], '/', ([dateVal getMonth] + 1), '/', AMI18nEngine_formatTwoDigitWithInt_(self, [dateVal getYear]));
}


#line 164
- (NSString *)formatPresenceWithAMUserPresence:(AMUserPresence *)value
                                 withAMSexEnum:(AMSexEnum *)sex {
  
#line 165
  if (value == nil) {
    return nil;
  }
  
#line 169
  if ([((AMUserPresence *) nil_chk(value)) getState] == AMUserPresence_StateEnum_get_OFFLINE()) {
    jint delta = (jint) ([((JavaUtilDate *) [[JavaUtilDate alloc] init]) getTime] / 1000LL - [value getLastSeen]);
    if (delta < 60) {
      if ([((JavaUtilHashMap *) nil_chk(locale_)) containsKeyWithId:@"OnlineNowMale"] && [locale_ containsKeyWithId:@"OnlineNowFemale"]) {
        return sex == AMSexEnum_get_UNKNOWN() ?
#line 174
        [locale_ getWithId:@"OnlineNow"] :
#line 175
        sex == AMSexEnum_get_MALE() ?
#line 176
        [locale_ getWithId:@"OnlineNowMale"] :
#line 177
        [locale_ getWithId:@"OnlineNowFemale"];
      }
      else {
        
#line 179
        return [locale_ getWithId:@"OnlineNow"];
      }
    }
    else
#line 181
    if (delta < 24 * 60 * 60) {
      NSString *time = [self formatTimeWithLong:[value getLastSeen] * 1000LL];
      
#line 184
      if (AMI18nEngine_areSameDaysWithLong_withLong_([value getLastSeen] * 1000LL, [((JavaUtilDate *) [[JavaUtilDate alloc] init]) getTime])) {
        if ([((JavaUtilHashMap *) nil_chk(locale_)) containsKeyWithId:@"OnlineLastSeenTodayMale"] && [locale_ containsKeyWithId:@"OnlineLastSeenTodayMale"]) {
          return [(sex == AMSexEnum_get_UNKNOWN() ?
#line 187
          [locale_ getWithId:@"OnlineLastSeenToday"] :
#line 188
          sex == AMSexEnum_get_MALE() ?
#line 189
          [locale_ getWithId:@"OnlineLastSeenTodayMale"] :
#line 190
          [locale_ getWithId:@"OnlineLastSeenTodayFemale"]) replace:@"{time}" withSequence:time];
        }
        else {
          
#line 192
          return [((NSString *) nil_chk([locale_ getWithId:@"OnlineLastSeenToday"])) replace:@"{time}" withSequence:time];
        }
      }
      else {
        
#line 195
        if ([((JavaUtilHashMap *) nil_chk(locale_)) containsKeyWithId:@"OnlineLastSeenYesterdayMale"] && [locale_ containsKeyWithId:@"OnlineLastSeenYesterdayMale"]) {
          return [(sex == AMSexEnum_get_UNKNOWN() ?
#line 197
          [locale_ getWithId:@"OnlineLastSeenYesterday"] :
#line 198
          sex == AMSexEnum_get_MALE() ?
#line 199
          [locale_ getWithId:@"OnlineLastSeenYesterdayMale"] :
#line 200
          [locale_ getWithId:@"OnlineLastSeenYesterdayFemale"]) replace:@"{time}" withSequence:time];
        }
        else {
          
#line 202
          return [((NSString *) nil_chk([locale_ getWithId:@"OnlineLastSeenYesterday"])) replace:@"{time}" withSequence:time];
        }
      }
    }
    else
#line 205
    if (delta < 14 * 24 * 60 * 60) {
      NSString *time = [self formatTimeWithLong:[value getLastSeen] * 1000LL];
      NSString *date = [self formatDateWithLong:[value getLastSeen] * 1000LL];
      
#line 209
      if ([((JavaUtilHashMap *) nil_chk(locale_)) containsKeyWithId:@"OnlineLastSeenDateTimeMale"] && [locale_ containsKeyWithId:@"OnlineLastSeenDateTimeMale"]) {
        return [((NSString *) nil_chk([(sex == AMSexEnum_get_UNKNOWN() ?
#line 211
        [locale_ getWithId:@"OnlineLastSeenDateTime"] :
#line 212
        sex == AMSexEnum_get_MALE() ?
#line 213
        [locale_ getWithId:@"OnlineLastSeenDateTimeMale"] :
#line 214
        [locale_ getWithId:@"OnlineLastSeenDateTimeFemale"]) replace:
#line 215
        @"{time}" withSequence:time])) replace:
#line 216
        @"{date}" withSequence:date];
      }
      else {
        
#line 218
        return [((NSString *) nil_chk([((NSString *) nil_chk([locale_ getWithId:@"OnlineLastSeenDateTime"])) replace:
#line 219
        @"{time}" withSequence:time])) replace:
#line 220
        @"{date}" withSequence:date];
      }
    }
    else
#line 222
    if (delta < 6 * 30 * 24 * 60 * 60) {
      NSString *date = [self formatDateWithLong:[value getLastSeen] * 1000LL];
      
#line 225
      if ([((JavaUtilHashMap *) nil_chk(locale_)) containsKeyWithId:@"OnlineLastSeenDateMale"] && [locale_ containsKeyWithId:@"OnlineLastSeenDateMale"]) {
        return [(sex == AMSexEnum_get_UNKNOWN() ?
#line 227
        [locale_ getWithId:@"OnlineLastSeenDate"] :
#line 228
        sex == AMSexEnum_get_MALE() ?
#line 229
        [locale_ getWithId:@"OnlineLastSeenDateMale"] :
#line 230
        [locale_ getWithId:@"OnlineLastSeenDateFemale"]) replace:
#line 231
        @"{date}" withSequence:date];
      }
      else {
        
#line 233
        return [((NSString *) nil_chk([locale_ getWithId:@"OnlineLastSeenDate"])) replace:
#line 234
        @"{date}" withSequence:date];
      }
    }
    else {
      
#line 237
      return [((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"OnlineOff"];
    }
  }
  else
#line 239
  if ([value getState] == AMUserPresence_StateEnum_get_ONLINE()) {
    return [((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"OnlineOn"];
  }
  
#line 243
  return nil;
}


#line 246
- (NSString *)formatDurationWithInt:(jint)duration {
  
#line 247
  if (duration < 60) {
    return JreStrcat("$C$", AMI18nEngine_formatTwoDigitWithInt_(self, 0), ':', AMI18nEngine_formatTwoDigitWithInt_(self, duration));
  }
  else
#line 249
  if (duration < 60 * 60) {
    return JreStrcat("$C$", AMI18nEngine_formatTwoDigitWithInt_(self, duration / 60), ':', AMI18nEngine_formatTwoDigitWithInt_(self, duration % 60));
  }
  else {
    
#line 252
    return JreStrcat("$C$C$", AMI18nEngine_formatTwoDigitWithInt_(self, duration / 3600), ':', AMI18nEngine_formatTwoDigitWithInt_(self, duration / 60), ':', AMI18nEngine_formatTwoDigitWithInt_(self, duration % 60));
  }
}


#line 256
- (NSString *)formatGroupMembersWithInt:(jint)count {
  
#line 257
  return [((NSString *) nil_chk([((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"GroupMembers"])) replace:@"{count}" withSequence:JreStrcat("I", count)];
}


#line 260
- (NSString *)formatGroupOnlineWithInt:(jint)count {
  
#line 261
  return [((NSString *) nil_chk([((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"GroupOnline"])) replace:@"{count}" withSequence:JreStrcat("I", count)];
}


#line 264
- (NSString *)formatContentDialogTextWithInt:(jint)senderId
                       withAMContentTypeEnum:(AMContentTypeEnum *)contentType
                                withNSString:(NSString *)text
                                     withInt:(jint)relatedUid {
  
#line 265
  switch ([contentType ordinal]) {
    case AMContentType_TEXT:
    return text;
    case AMContentType_DOCUMENT:
    if (text == nil || ((jint) [text length]) == 0) {
      return [((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"ContentDocument"];
    }
    return text;
    case AMContentType_DOCUMENT_PHOTO:
    return [((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"ContentPhoto"];
    case AMContentType_DOCUMENT_VIDEO:
    return [((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"ContentVideo"];
    case AMContentType_SERVICE:
    return text;
    case AMContentType_SERVICE_REGISTERED:
    return AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, @"ServiceRegistered");
    case AMContentType_SERVICE_CREATED:
    return AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, @"ServiceGroupCreated");
    case AMContentType_SERVICE_ADD:
    return [((NSString *) nil_chk(AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, @"ServiceGroupAdded"))) replace:
#line 285
    @"{name_added}" withSequence:[self getSubjectNameWithInt:relatedUid]];
    case AMContentType_SERVICE_LEAVE:
    return AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, @"ServiceGroupLeaved");
    case AMContentType_SERVICE_KICK:
    return [((NSString *) nil_chk(AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, @"ServiceGroupKicked"))) replace:
#line 290
    @"{name_kicked}" withSequence:[self getSubjectNameWithInt:relatedUid]];
    case AMContentType_SERVICE_AVATAR:
    return AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, @"ServiceGroupAvatarChanged");
    case AMContentType_SERVICE_AVATAR_REMOVED:
    return AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, @"ServiceGroupAvatarRemoved");
    case AMContentType_SERVICE_TITLE:
    return AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, @"ServiceGroupTitle");
    case AMContentType_EMPTY:
    return @"";
    default:
    case AMContentType_UNKNOWN_CONTENT:
    return [((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"ContentUnsupported"];
  }
}


#line 305
- (jboolean)isLargeDialogMessageWithAMContentTypeEnum:(AMContentTypeEnum *)contentType {
  
#line 306
  switch ([contentType ordinal]) {
    case AMContentType_SERVICE:
    case AMContentType_SERVICE_AVATAR:
    case AMContentType_SERVICE_AVATAR_REMOVED:
    case AMContentType_SERVICE_CREATED:
    case AMContentType_SERVICE_TITLE:
    case AMContentType_SERVICE_LEAVE:
    case AMContentType_SERVICE_REGISTERED:
    case AMContentType_SERVICE_KICK:
    case AMContentType_SERVICE_ADD:
    return YES;
    default:
    return NO;
  }
}


#line 322
- (NSString *)formatFullServiceMessageWithInt:(jint)senderId
                         withAMServiceContent:(AMServiceContent *)content {
  
#line 323
  if ([content isKindOfClass:[AMServiceUserRegistered class]]) {
    return AMI18nEngine_getTemplateWithInt_withNSString_(self, senderId, @"ServiceRegisteredFull");
  }
  else
#line 325
  if ([content isKindOfClass:[AMServiceGroupCreated class]]) {
    return [((NSString *) nil_chk(AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, @"ServiceGroupCreatedFull"))) replace:
#line 327
    @"{title}" withSequence:
#line 328
    [((AMServiceGroupCreated *) nil_chk(((AMServiceGroupCreated *) check_class_cast(content, [AMServiceGroupCreated class])))) getGroupTitle]];
  }
  else
#line 329
  if ([content isKindOfClass:[AMServiceGroupUserAdded class]]) {
    return [((NSString *) nil_chk(AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, @"ServiceGroupAdded"))) replace:
#line 331
    @"{name_added}" withSequence:
#line 332
    [self getSubjectNameWithInt:[((AMServiceGroupUserAdded *) nil_chk(((AMServiceGroupUserAdded *) check_class_cast(content, [AMServiceGroupUserAdded class])))) getAddedUid]]];
  }
  else
#line 333
  if ([content isKindOfClass:[AMServiceGroupUserKicked class]]) {
    return [((NSString *) nil_chk(AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, @"ServiceGroupKicked"))) replace:
#line 335
    @"{name_kicked}" withSequence:
#line 336
    [self getSubjectNameWithInt:[((AMServiceGroupUserKicked *) nil_chk(((AMServiceGroupUserKicked *) check_class_cast(content, [AMServiceGroupUserKicked class])))) getKickedUid]]];
  }
  else
#line 337
  if ([content isKindOfClass:[AMServiceGroupUserLeave class]]) {
    return AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, @"ServiceGroupLeaved");
  }
  else
#line 339
  if ([content isKindOfClass:[AMServiceGroupTitleChanged class]]) {
    return [((NSString *) nil_chk(AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, @"ServiceGroupTitleFull"))) replace:
#line 341
    @"{title}" withSequence:
#line 342
    [((AMServiceGroupTitleChanged *) nil_chk(((AMServiceGroupTitleChanged *) check_class_cast(content, [AMServiceGroupTitleChanged class])))) getNewTitle]];
  }
  else
#line 343
  if ([content isKindOfClass:[AMServiceGroupAvatarChanged class]]) {
    if ([((AMServiceGroupAvatarChanged *) nil_chk(((AMServiceGroupAvatarChanged *) check_class_cast(content, [AMServiceGroupAvatarChanged class])))) getNewAvatar] != nil) {
      return AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, @"ServiceGroupAvatarChanged");
    }
    else {
      
#line 347
      return AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, @"ServiceGroupAvatarRemoved");
    }
  }
  
#line 351
  AMLog_wWithNSString_withNSString_(@"i18NEngine", JreStrcat("$@", @"Unknown service content: ", content));
  
#line 353
  return [((AMServiceContent *) nil_chk(content)) getCompatText];
}


#line 356
- (NSString *)formatPerformerNameWithInt:(jint)uid {
  
#line 357
  if (uid == [((ImActorModelModulesAuth *) nil_chk([((ImActorModelModulesModules *) nil_chk(modules_)) getAuthModule])) myUid]) {
    return [((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"You"];
  }
  else {
    
#line 360
    return [((AMUser *) nil_chk(AMI18nEngine_getUserWithInt_(self, uid))) getName];
  }
}


#line 364
- (NSString *)getSubjectNameWithInt:(jint)uid {
  
#line 365
  if (uid == [((ImActorModelModulesAuth *) nil_chk([((ImActorModelModulesModules *) nil_chk(modules_)) getAuthModule])) myUid]) {
    return [((JavaUtilHashMap *) nil_chk(locale_)) getWithId:@"Thee"];
  }
  else {
    
#line 368
    return [((AMUser *) nil_chk(AMI18nEngine_getUserWithInt_(self, uid))) getName];
  }
}


#line 372
- (NSString *)formatMessagesWithAMMessageArray:(IOSObjectArray *)messages {
  
#line 373
  NSString *text = @"";
  JavaUtilArrays_sortWithNSObjectArray_withJavaUtilComparator_(messages, [[AMI18nEngine_$1 alloc] init]);
  
#line 386
  if (((IOSObjectArray *) nil_chk(messages))->size_ == 1) {
    {
      IOSObjectArray *a__ =
#line 387
      messages;
      AMMessage * const *b__ = a__->buffer_;
      AMMessage * const *e__ = b__ + a__->size_;
      while (b__ < e__) {
        AMMessage *model = *b__++;
        
#line 388
        if (!([[((AMMessage *) nil_chk(model)) getContent] isKindOfClass:[AMTextContent class]])) {
          continue;
        }
        text = JreStrcat("$$", text, [((AMTextContent *) nil_chk(((AMTextContent *) check_class_cast([model getContent], [AMTextContent class])))) getText]);
      }
    }
  }
  else {
    {
      IOSObjectArray *a__ =
#line 394
      messages;
      AMMessage * const *b__ = a__->buffer_;
      AMMessage * const *e__ = b__ + a__->size_;
      while (b__ < e__) {
        AMMessage *model = *b__++;
        
#line 395
        if (!([[((AMMessage *) nil_chk(model)) getContent] isKindOfClass:[AMTextContent class]])) {
          continue;
        }
        if (((jint) [text length]) > 0) {
          text = JreStrcat("$C", text, 0x000a);
        }
        text = JreStrcat("$$", text, JreStrcat("$$", [((AMUser *) nil_chk([((id<DKKeyValueEngine>) nil_chk([((ImActorModelModulesUsers *) nil_chk([((ImActorModelModulesModules *) nil_chk(modules_)) getUsersModule])) getUsers])) getValueWithLong:[model getSenderId]])) getName], @": "));
        text = JreStrcat("$$", text, [((AMTextContent *) nil_chk(((AMTextContent *) check_class_cast([model getContent], [AMTextContent class])))) getText]);
      }
    }
  }
  
#line 405
  return text;
}


#line 408
- (NSString *)formatFastNameWithNSString:(NSString *)name {
  
#line 409
  if (((jint) [((NSString *) nil_chk(name)) length]) > 1) {
    if (JavaLangCharacter_isLetterWithChar_([name charAtWithInt:0])) {
      return [((NSString *) nil_chk([name substring:0 endIndex:1])) uppercaseString];
    }
    else {
      
#line 413
      return @"#";
    }
  }
  else {
    
#line 416
    return @"#";
  }
}


#line 420
- (NSString *)getTemplateNamedWithInt:(jint)senderId
                         withNSString:(NSString *)baseString {
  return AMI18nEngine_getTemplateNamedWithInt_withNSString_(self, senderId, baseString);
}

- (NSString *)getTemplateWithInt:(jint)senderId
                    withNSString:(NSString *)baseString {
  return AMI18nEngine_getTemplateWithInt_withNSString_(self, senderId, baseString);
}


#line 442
- (AMUser *)getUserWithInt:(jint)uid {
  return AMI18nEngine_getUserWithInt_(self, uid);
}

- (void)copyAllFieldsTo:(AMI18nEngine *)other {
  [super copyAllFieldsTo:other];
  other->modules_ = modules_;
  other->locale_ = locale_;
  other->is24Hours_ = is24Hours_;
  other->MONTHS_SHORT_ = MONTHS_SHORT_;
  other->MONTHS_ = MONTHS_;
}

@end

NSString *AMI18nEngine_formatTwoDigitWithInt_(AMI18nEngine *self, jint v) {
  
#line 72
  if (v < 0) {
    return @"00";
  }
  else
#line 74
  if (v < 10) {
    return JreStrcat("CI", '0', v);
  }
  else
#line 76
  if (v < 100) {
    return JreStrcat("I", v);
  }
  else {
    
#line 79
    NSString *res = JreStrcat("I", v);
    return [res substring:((jint) [res length]) - 2];
  }
}

jboolean AMI18nEngine_areSameDaysWithLong_withLong_(jlong a, jlong b) {
  AMI18nEngine_init();
  
#line 85
  JavaUtilDate *date1 = [[JavaUtilDate alloc] initWithLong:a];
  jint y1 = [date1 getYear];
  jint m1 = [date1 getMonth];
  jint d1 = [date1 getDate];
  JavaUtilDate *date2 = [[JavaUtilDate alloc] initWithLong:b];
  jint y2 = [date2 getYear];
  jint m2 = [date2 getMonth];
  jint d2 = [date2 getDate];
  
#line 94
  return y1 == y2 && m1 == m2 && d1 == d2;
}

NSString *AMI18nEngine_getTemplateNamedWithInt_withNSString_(AMI18nEngine *self, jint senderId, NSString *baseString) {
  
#line 421
  return [((NSString *) nil_chk(AMI18nEngine_getTemplateWithInt_withNSString_(self, senderId, baseString))) replace:@"{name}" withSequence:
#line 422
  [self formatPerformerNameWithInt:senderId]];
}

NSString *AMI18nEngine_getTemplateWithInt_withNSString_(AMI18nEngine *self, jint senderId, NSString *baseString) {
  
#line 426
  if (senderId == [((ImActorModelModulesAuth *) nil_chk([((ImActorModelModulesModules *) nil_chk(self->modules_)) getAuthModule])) myUid]) {
    if ([((JavaUtilHashMap *) nil_chk(self->locale_)) containsKeyWithId:JreStrcat("$$", baseString, @"You")]) {
      return [self->locale_ getWithId:JreStrcat("$$", baseString, @"You")];
    }
  }
  if ([((JavaUtilHashMap *) nil_chk(self->locale_)) containsKeyWithId:JreStrcat("$$", baseString, @"Male")] && [self->locale_ containsKeyWithId:JreStrcat("$$", baseString, @"Female")]) {
    AMUser *u = AMI18nEngine_getUserWithInt_(self, senderId);
    if ([((AMUser *) nil_chk(u)) getSex] == AMSexEnum_get_MALE()) {
      return [self->locale_ getWithId:JreStrcat("$$", baseString, @"Male")];
    }
    else
#line 435
    if ([u getSex] == AMSexEnum_get_FEMALE()) {
      return [self->locale_ getWithId:JreStrcat("$$", baseString, @"Female")];
    }
  }
  return [self->locale_ getWithId:baseString];
}

AMUser *AMI18nEngine_getUserWithInt_(AMI18nEngine *self, jint uid) {
  
#line 443
  return [((id<DKKeyValueEngine>) nil_chk([((ImActorModelModulesUsers *) nil_chk([((ImActorModelModulesModules *) nil_chk(self->modules_)) getUsersModule])) getUsers])) getValueWithLong:uid];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AMI18nEngine)

@implementation AMI18nEngine_$1


#line 376
- (jint)compareWithLong:(jlong)lhs
               withLong:(jlong)rhs {
  
#line 377
  return lhs < rhs ? -1 : (lhs == rhs ? 0 : 1);
}


#line 381
- (jint)compareWithId:(AMMessage *)lhs
               withId:(AMMessage *)rhs {
  
#line 382
  return [self compareWithLong:[((AMMessage *) nil_chk(lhs)) getEngineSort] withLong:[((AMMessage *) nil_chk(rhs)) getEngineSort]];
}

- (instancetype)init {
  return [super init];
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AMI18nEngine_$1)
