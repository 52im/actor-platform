//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/droidkit/actors/concurrency/Future.java
//

#line 1 "/Users/ex3ndr/Develop/actor-model/library/actor-cocoa-base/build/java/im/actor/model/droidkit/actors/concurrency/Future.java"

#include "J2ObjC_source.h"
#include "im/actor/model/droidkit/actors/concurrency/Future.h"
#include "im/actor/model/droidkit/actors/concurrency/FutureCallback.h"
#include "im/actor/model/droidkit/actors/concurrency/FutureTimeoutException.h"
#include "java/lang/Throwable.h"
#include "java/util/LinkedList.h"

@interface ImActorModelDroidkitActorsConcurrencyFuture () {
 @public
  JavaUtilLinkedList *callbacks_;
  jboolean isCompleted__;
  jboolean isCanceled__;
  jboolean isError__;
  id result_;
  JavaLangThrowable *error__;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelDroidkitActorsConcurrencyFuture, callbacks_, JavaUtilLinkedList *)
J2OBJC_FIELD_SETTER(ImActorModelDroidkitActorsConcurrencyFuture, result_, id)
J2OBJC_FIELD_SETTER(ImActorModelDroidkitActorsConcurrencyFuture, error__, JavaLangThrowable *)


#line 9
@implementation ImActorModelDroidkitActorsConcurrencyFuture


#line 19
- (jboolean)isCompleted {
  @synchronized(self) {
    
#line 20
    return isCompleted__;
  }
}


#line 23
- (jboolean)isError {
  @synchronized(self) {
    
#line 24
    return isError__;
  }
}


#line 27
- (jboolean)isCanceled {
  @synchronized(self) {
    
#line 28
    return isCanceled__;
  }
}


#line 31
- (JavaLangThrowable *)error {
  @synchronized(self) {
    
#line 32
    return error__;
  }
}


#line 35
- (id)get {
  @synchronized(self) {
    
#line 36
    return result_;
  }
}


#line 39
- (jboolean)addListenerWithImActorModelDroidkitActorsConcurrencyFutureCallback:(id<ImActorModelDroidkitActorsConcurrencyFutureCallback>)callback {
  @synchronized(self) {
    
#line 40
    [((JavaUtilLinkedList *) nil_chk(callbacks_)) addWithId:callback];
    if (isCompleted__) {
      if (isCanceled__) {
        return YES;
      }
      if (isError__) {
        [((id<ImActorModelDroidkitActorsConcurrencyFutureCallback>) nil_chk(callback)) onErrorWithJavaLangThrowable:error__];
      }
      else {
        
#line 48
        [((id<ImActorModelDroidkitActorsConcurrencyFutureCallback>) nil_chk(callback)) onResultWithId:result_];
      }
    }
    return isCompleted__;
  }
}


#line 54
- (void)removeListenerWithImActorModelDroidkitActorsConcurrencyFutureCallback:(id<ImActorModelDroidkitActorsConcurrencyFutureCallback>)callback {
  @synchronized(self) {
    
#line 55
    [((JavaUtilLinkedList *) nil_chk(callbacks_)) removeWithId:callback];
  }
}


#line 58
- (void)onCancel {
  @synchronized(self) {
    
#line 59
    if (isCompleted__) {
      return;
    }
    isCompleted__ = YES;
    isError__ = NO;
    isCanceled__ = YES;
  }
}


#line 67
- (void)onCompletedWithId:(id)res {
  @synchronized(self) {
    
#line 68
    if (isCompleted__) {
      return;
    }
    isCompleted__ = YES;
    isCanceled__ = NO;
    isError__ = NO;
    error__ = nil;
    result_ = res;
    
#line 77
    for (id<ImActorModelDroidkitActorsConcurrencyFutureCallback> __strong callback in nil_chk(callbacks_)) {
      [((id<ImActorModelDroidkitActorsConcurrencyFutureCallback>) nil_chk(callback)) onResultWithId:res];
    }
  }
}


#line 82
- (void)onErrorWithJavaLangThrowable:(JavaLangThrowable *)throwable {
  @synchronized(self) {
    
#line 83
    if (isCompleted__) {
      return;
    }
    isCompleted__ = YES;
    isCanceled__ = NO;
    isError__ = YES;
    error__ = throwable;
    result_ = nil;
    
#line 92
    for (id<ImActorModelDroidkitActorsConcurrencyFutureCallback> __strong callback in nil_chk(callbacks_)) {
      [((id<ImActorModelDroidkitActorsConcurrencyFutureCallback>) nil_chk(callback)) onErrorWithJavaLangThrowable:throwable];
    }
  }
}


#line 97
- (void)onTimeout {
  @synchronized(self) {
    
#line 98
    [self onErrorWithJavaLangThrowable:[[ImActorModelDroidkitActorsConcurrencyFutureTimeoutException alloc] init]];
  }
}

- (instancetype)init {
  if (self = [super init]) {
    callbacks_ =
#line 11
    [[JavaUtilLinkedList alloc] init];
    isCompleted__ =
#line 13
    NO;
    isCanceled__ =
#line 14
    NO;
    isError__ =
#line 15
    NO;
    result_ =
#line 16
    nil;
    error__ =
#line 17
    nil;
  }
  return self;
}

- (void)copyAllFieldsTo:(ImActorModelDroidkitActorsConcurrencyFuture *)other {
  [super copyAllFieldsTo:other];
  other->callbacks_ = callbacks_;
  other->isCompleted__ = isCompleted__;
  other->isCanceled__ = isCanceled__;
  other->isError__ = isError__;
  other->result_ = result_;
  other->error__ = error__;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelDroidkitActorsConcurrencyFuture)
