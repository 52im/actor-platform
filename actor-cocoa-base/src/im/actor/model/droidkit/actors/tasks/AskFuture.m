//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/actor-ios/build/java/im/actor/model/droidkit/actors/tasks/AskFuture.java
//

#include "J2ObjC_source.h"
#include "im/actor/model/droidkit/actors/tasks/ActorAskImpl.h"
#include "im/actor/model/droidkit/actors/tasks/AskCallback.h"
#include "im/actor/model/droidkit/actors/tasks/AskFuture.h"
#include "im/actor/model/droidkit/actors/tasks/AskProgressCallback.h"
#include "im/actor/model/droidkit/actors/tasks/AskTimeoutException.h"
#include "java/lang/Throwable.h"
#include "java/util/LinkedList.h"

@interface ImActorModelDroidkitActorsTasksAskFuture () {
 @public
  JavaUtilLinkedList *callbacks_;
  ImActorModelDroidkitActorsTasksActorAskImpl *askImpl_;
  jint reqId_;
  jboolean isCompleted__;
  jboolean isCanceled__;
  jboolean isError__;
  id result__;
  JavaLangThrowable *error__;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelDroidkitActorsTasksAskFuture, callbacks_, JavaUtilLinkedList *)
J2OBJC_FIELD_SETTER(ImActorModelDroidkitActorsTasksAskFuture, askImpl_, ImActorModelDroidkitActorsTasksActorAskImpl *)
J2OBJC_FIELD_SETTER(ImActorModelDroidkitActorsTasksAskFuture, result__, id)
J2OBJC_FIELD_SETTER(ImActorModelDroidkitActorsTasksAskFuture, error__, JavaLangThrowable *)

@implementation ImActorModelDroidkitActorsTasksAskFuture

- (instancetype)initWithImActorModelDroidkitActorsTasksActorAskImpl:(ImActorModelDroidkitActorsTasksActorAskImpl *)askImpl
                                                            withInt:(jint)reqId {
  if (self = [super init]) {
    callbacks_ = [[JavaUtilLinkedList alloc] init];
    isCompleted__ = NO;
    isCanceled__ = NO;
    isError__ = NO;
    result__ = nil;
    error__ = nil;
    self->askImpl_ = askImpl;
    self->reqId_ = reqId;
  }
  return self;
}

- (void)addListenerWithImActorModelDroidkitActorsTasksAskCallback:(id<ImActorModelDroidkitActorsTasksAskCallback>)callback {
  [((JavaUtilLinkedList *) nil_chk(callbacks_)) addWithId:callback];
}

- (void)removeListenerWithImActorModelDroidkitActorsTasksAskCallback:(id<ImActorModelDroidkitActorsTasksAskCallback>)callback {
  [((JavaUtilLinkedList *) nil_chk(callbacks_)) removeWithId:callback];
}

- (jboolean)isCompleted {
  return isCompleted__;
}

- (jboolean)isError {
  return isError__;
}

- (jboolean)isCanceled {
  return isCanceled__;
}

- (JavaLangThrowable *)error {
  return error__;
}

- (id)result {
  return result__;
}

- (void)cancel {
  if (isCompleted__) {
    return;
  }
  isCompleted__ = YES;
  isError__ = NO;
  isCanceled__ = YES;
  [((ImActorModelDroidkitActorsTasksActorAskImpl *) nil_chk(askImpl_)) onTaskCancelledWithInt:reqId_];
}

- (void)onErrorWithJavaLangThrowable:(JavaLangThrowable *)throwable {
  if (isCompleted__) {
    return;
  }
  isCompleted__ = YES;
  isCanceled__ = NO;
  isError__ = YES;
  error__ = throwable;
  result__ = nil;
  for (id<ImActorModelDroidkitActorsTasksAskCallback> __strong callback in nil_chk(callbacks_)) {
    [((id<ImActorModelDroidkitActorsTasksAskCallback>) nil_chk(callback)) onErrorWithJavaLangThrowable:throwable];
  }
}

- (void)onResultWithId:(id)res {
  if (isCompleted__) {
    return;
  }
  isCompleted__ = YES;
  isCanceled__ = NO;
  isError__ = NO;
  error__ = nil;
  result__ = res;
  for (id<ImActorModelDroidkitActorsTasksAskCallback> __strong callback in nil_chk(callbacks_)) {
    [((id<ImActorModelDroidkitActorsTasksAskCallback>) nil_chk(callback)) onResultWithId:res];
  }
}

- (void)onProgressWithId:(id)res {
  if (isCompleted__) {
    return;
  }
  for (id<ImActorModelDroidkitActorsTasksAskCallback> __strong callback in nil_chk(callbacks_)) {
    if ([ImActorModelDroidkitActorsTasksAskProgressCallback_class_() isInstance:callback]) {
      [((id<ImActorModelDroidkitActorsTasksAskProgressCallback>) nil_chk(((id<ImActorModelDroidkitActorsTasksAskProgressCallback>) check_protocol_cast(callback, @protocol(ImActorModelDroidkitActorsTasksAskProgressCallback))))) onProgressWithId:res];
    }
  }
}

- (void)onTimeout {
  [self onErrorWithJavaLangThrowable:[[ImActorModelDroidkitActorsTasksAskTimeoutException alloc] init]];
}

- (void)copyAllFieldsTo:(ImActorModelDroidkitActorsTasksAskFuture *)other {
  [super copyAllFieldsTo:other];
  other->callbacks_ = callbacks_;
  other->askImpl_ = askImpl_;
  other->reqId_ = reqId_;
  other->isCompleted__ = isCompleted__;
  other->isCanceled__ = isCanceled__;
  other->isError__ = isError__;
  other->result__ = result__;
  other->error__ = error__;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelDroidkitActorsTasksAskFuture)
