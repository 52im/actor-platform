//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/actor-ios/build/java/im/actor/model/modules/Files.java
//

#include "IOSClass.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "im/actor/model/Configuration.h"
#include "im/actor/model/Storage.h"
#include "im/actor/model/droidkit/actors/ActorRef.h"
#include "im/actor/model/droidkit/actors/ActorSystem.h"
#include "im/actor/model/droidkit/actors/Props.h"
#include "im/actor/model/entity/FileLocation.h"
#include "im/actor/model/modules/Files.h"
#include "im/actor/model/modules/Modules.h"
#include "im/actor/model/modules/file/DownloadManager.h"
#include "im/actor/model/modules/file/Downloaded.h"
#include "im/actor/model/storage/KeyValueEngine.h"
#include "im/actor/model/storage/KeyValueStorage.h"
#include "im/actor/model/viewmodel/FileCallback.h"
#include "java/io/IOException.h"

@interface ImActorModelModulesFiles () {
 @public
  id<AMKeyValueEngine> downloadedEngine_;
  DKActorRef *downloadManager_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesFiles, downloadedEngine_, id<AMKeyValueEngine>)
J2OBJC_FIELD_SETTER(ImActorModelModulesFiles, downloadManager_, DKActorRef *)

@interface ImActorModelModulesFiles_$2 () {
 @public
  ImActorModelModulesFiles *this$0_;
}
@end

J2OBJC_FIELD_SETTER(ImActorModelModulesFiles_$2, this$0_, ImActorModelModulesFiles *)

@implementation ImActorModelModulesFiles

- (instancetype)initWithImActorModelModulesModules:(ImActorModelModulesModules *)modules {
  if (self = [super initWithImActorModelModulesModules:modules]) {
    downloadedEngine_ = [[ImActorModelModulesFiles_$1 alloc] initWithAMKeyValueStorage:[((id<AMStorage>) nil_chk([((AMConfiguration *) nil_chk([((ImActorModelModulesModules *) nil_chk(modules)) getConfiguration])) getStorage])) createDownloadsEngine]];
  }
  return self;
}

- (void)run {
  downloadManager_ = [((DKActorSystem *) nil_chk(DKActorSystem_system())) actorOfWithDKProps:DKProps_createWithIOSClass_withDKActorCreator_(ImActorModelModulesFileDownloadManager_class_(), [[ImActorModelModulesFiles_$2 alloc] initWithImActorModelModulesFiles:self]) withNSString:@"actor/download/manager"];
}

- (id<AMKeyValueEngine>)getDownloadedEngine {
  return downloadedEngine_;
}

- (void)bindFileWithAMFileLocation:(AMFileLocation *)fileLocation
                       withBoolean:(jboolean)isAutostart
                withAMFileCallback:(id<AMFileCallback>)callback {
  [((DKActorRef *) nil_chk(downloadManager_)) sendWithId:[[ImActorModelModulesFileDownloadManager_BindDownload alloc] initWithAMFileLocation:fileLocation withBoolean:isAutostart withAMFileCallback:callback]];
}

- (void)unbindFileWithLong:(jlong)fileId
        withAMFileCallback:(id<AMFileCallback>)callback
               withBoolean:(jboolean)cancel {
}

- (void)copyAllFieldsTo:(ImActorModelModulesFiles *)other {
  [super copyAllFieldsTo:other];
  other->downloadedEngine_ = downloadedEngine_;
  other->downloadManager_ = downloadManager_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesFiles)

@implementation ImActorModelModulesFiles_$1

- (IOSByteArray *)serializeWithAMKeyValueItem:(ImActorModelModulesFileDownloaded *)value {
  return [((ImActorModelModulesFileDownloaded *) nil_chk(value)) toByteArray];
}

- (ImActorModelModulesFileDownloaded *)deserializeWithByteArray:(IOSByteArray *)data {
  @try {
    return ImActorModelModulesFileDownloaded_fromBytesWithByteArray_(data);
  }
  @catch (JavaIoIOException *e) {
    [((JavaIoIOException *) nil_chk(e)) printStackTrace];
    return nil;
  }
}

- (instancetype)initWithAMKeyValueStorage:(id<AMKeyValueStorage>)arg$0 {
  return [super initWithAMKeyValueStorage:arg$0];
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesFiles_$1)

@implementation ImActorModelModulesFiles_$2

- (ImActorModelModulesFileDownloadManager *)create {
  return [[ImActorModelModulesFileDownloadManager alloc] initWithImActorModelModulesModules:[this$0_ modules]];
}

- (instancetype)initWithImActorModelModulesFiles:(ImActorModelModulesFiles *)outer$ {
  this$0_ = outer$;
  return [super init];
}

- (void)copyAllFieldsTo:(ImActorModelModulesFiles_$2 *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ImActorModelModulesFiles_$2)
