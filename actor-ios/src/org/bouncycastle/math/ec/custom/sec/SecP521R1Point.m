//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/actor-ios/build/java/org/bouncycastle/math/ec/custom/sec/SecP521R1Point.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/IllegalArgumentException.h"
#include "org/bouncycastle/math/ec/ECCurve.h"
#include "org/bouncycastle/math/ec/ECFieldElement.h"
#include "org/bouncycastle/math/ec/ECPoint.h"
#include "org/bouncycastle/math/ec/custom/sec/SecP521R1Field.h"
#include "org/bouncycastle/math/ec/custom/sec/SecP521R1FieldElement.h"
#include "org/bouncycastle/math/ec/custom/sec/SecP521R1Point.h"
#include "org/bouncycastle/math/raw/Nat.h"

@implementation OrgBouncycastleMathEcCustomSecSecP521R1Point

- (instancetype)initWithOrgBouncycastleMathEcECCurve:(OrgBouncycastleMathEcECCurve *)curve
             withOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)x
             withOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)y {
  return [self initOrgBouncycastleMathEcCustomSecSecP521R1PointWithOrgBouncycastleMathEcECCurve:curve withOrgBouncycastleMathEcECFieldElement:x withOrgBouncycastleMathEcECFieldElement:y withBoolean:NO];
}

- (instancetype)initOrgBouncycastleMathEcCustomSecSecP521R1PointWithOrgBouncycastleMathEcECCurve:(OrgBouncycastleMathEcECCurve *)curve
                                                         withOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)x
                                                         withOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)y
                                                                                     withBoolean:(jboolean)withCompression {
  if (self = [super initWithOrgBouncycastleMathEcECCurve:curve withOrgBouncycastleMathEcECFieldElement:x withOrgBouncycastleMathEcECFieldElement:y]) {
    if ((x == nil) != (y == nil)) {
      @throw [[JavaLangIllegalArgumentException alloc] initWithNSString:@"Exactly one of the field elements is null"];
    }
    self->withCompression_ = withCompression;
  }
  return self;
}

- (instancetype)initWithOrgBouncycastleMathEcECCurve:(OrgBouncycastleMathEcECCurve *)curve
             withOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)x
             withOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)y
                                         withBoolean:(jboolean)withCompression {
  return [self initOrgBouncycastleMathEcCustomSecSecP521R1PointWithOrgBouncycastleMathEcECCurve:curve withOrgBouncycastleMathEcECFieldElement:x withOrgBouncycastleMathEcECFieldElement:y withBoolean:withCompression];
}

- (instancetype)initWithOrgBouncycastleMathEcECCurve:(OrgBouncycastleMathEcECCurve *)curve
             withOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)x
             withOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)y
        withOrgBouncycastleMathEcECFieldElementArray:(IOSObjectArray *)zs
                                         withBoolean:(jboolean)withCompression {
  if (self = [super initWithOrgBouncycastleMathEcECCurve:curve withOrgBouncycastleMathEcECFieldElement:x withOrgBouncycastleMathEcECFieldElement:y withOrgBouncycastleMathEcECFieldElementArray:zs]) {
    self->withCompression_ = withCompression;
  }
  return self;
}

- (OrgBouncycastleMathEcECPoint *)detach {
  return [[OrgBouncycastleMathEcCustomSecSecP521R1Point alloc] initWithOrgBouncycastleMathEcECCurve:nil withOrgBouncycastleMathEcECFieldElement:[self getAffineXCoord] withOrgBouncycastleMathEcECFieldElement:[self getAffineYCoord]];
}

- (OrgBouncycastleMathEcECPoint *)addWithOrgBouncycastleMathEcECPoint:(OrgBouncycastleMathEcECPoint *)b {
  if ([self isInfinity]) {
    return b;
  }
  if ([((OrgBouncycastleMathEcECPoint *) nil_chk(b)) isInfinity]) {
    return self;
  }
  if (self == b) {
    return [self twice];
  }
  OrgBouncycastleMathEcECCurve *curve = [self getCurve];
  OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *X1 = (OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) check_class_cast(self->x_, [OrgBouncycastleMathEcCustomSecSecP521R1FieldElement class]), *Y1 = (OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) check_class_cast(self->y_, [OrgBouncycastleMathEcCustomSecSecP521R1FieldElement class]);
  OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *X2 = (OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) check_class_cast([b getXCoord], [OrgBouncycastleMathEcCustomSecSecP521R1FieldElement class]), *Y2 = (OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) check_class_cast([b getYCoord], [OrgBouncycastleMathEcCustomSecSecP521R1FieldElement class]);
  OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *Z1 = (OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) check_class_cast(IOSObjectArray_Get(nil_chk(self->zs_), 0), [OrgBouncycastleMathEcCustomSecSecP521R1FieldElement class]);
  OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *Z2 = (OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) check_class_cast([b getZCoordWithInt:0], [OrgBouncycastleMathEcCustomSecSecP521R1FieldElement class]);
  IOSIntArray *t1 = OrgBouncycastleMathRawNat_createWithInt_(17);
  IOSIntArray *t2 = OrgBouncycastleMathRawNat_createWithInt_(17);
  IOSIntArray *t3 = OrgBouncycastleMathRawNat_createWithInt_(17);
  IOSIntArray *t4 = OrgBouncycastleMathRawNat_createWithInt_(17);
  jboolean Z1IsOne = [((OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) nil_chk(Z1)) isOne];
  IOSIntArray *U2, *S2;
  if (Z1IsOne) {
    U2 = ((OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) nil_chk(X2))->x_;
    S2 = ((OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) nil_chk(Y2))->x_;
  }
  else {
    S2 = t3;
    OrgBouncycastleMathEcCustomSecSecP521R1Field_squareWithIntArray_withIntArray_(Z1->x_, S2);
    U2 = t2;
    OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(S2, ((OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) nil_chk(X2))->x_, U2);
    OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(S2, Z1->x_, S2);
    OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(S2, ((OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) nil_chk(Y2))->x_, S2);
  }
  jboolean Z2IsOne = [((OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) nil_chk(Z2)) isOne];
  IOSIntArray *U1, *S1;
  if (Z2IsOne) {
    U1 = ((OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) nil_chk(X1))->x_;
    S1 = ((OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) nil_chk(Y1))->x_;
  }
  else {
    S1 = t4;
    OrgBouncycastleMathEcCustomSecSecP521R1Field_squareWithIntArray_withIntArray_(Z2->x_, S1);
    U1 = t1;
    OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(S1, ((OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) nil_chk(X1))->x_, U1);
    OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(S1, Z2->x_, S1);
    OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(S1, ((OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) nil_chk(Y1))->x_, S1);
  }
  IOSIntArray *H = OrgBouncycastleMathRawNat_createWithInt_(17);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_subtractWithIntArray_withIntArray_withIntArray_(U1, U2, H);
  IOSIntArray *R = t2;
  OrgBouncycastleMathEcCustomSecSecP521R1Field_subtractWithIntArray_withIntArray_withIntArray_(S1, S2, R);
  if (OrgBouncycastleMathRawNat_isZeroWithInt_withIntArray_(17, H)) {
    if (OrgBouncycastleMathRawNat_isZeroWithInt_withIntArray_(17, R)) {
      return [self twice];
    }
    return [((OrgBouncycastleMathEcECCurve *) nil_chk(curve)) getInfinity];
  }
  IOSIntArray *HSquared = t3;
  OrgBouncycastleMathEcCustomSecSecP521R1Field_squareWithIntArray_withIntArray_(H, HSquared);
  IOSIntArray *G = OrgBouncycastleMathRawNat_createWithInt_(17);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(HSquared, H, G);
  IOSIntArray *V = t3;
  OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(HSquared, U1, V);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(S1, G, t1);
  OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *X3 = [[OrgBouncycastleMathEcCustomSecSecP521R1FieldElement alloc] initWithIntArray:t4];
  OrgBouncycastleMathEcCustomSecSecP521R1Field_squareWithIntArray_withIntArray_(R, X3->x_);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_addWithIntArray_withIntArray_withIntArray_(X3->x_, G, X3->x_);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_subtractWithIntArray_withIntArray_withIntArray_(X3->x_, V, X3->x_);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_subtractWithIntArray_withIntArray_withIntArray_(X3->x_, V, X3->x_);
  OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *Y3 = [[OrgBouncycastleMathEcCustomSecSecP521R1FieldElement alloc] initWithIntArray:G];
  OrgBouncycastleMathEcCustomSecSecP521R1Field_subtractWithIntArray_withIntArray_withIntArray_(V, X3->x_, Y3->x_);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(Y3->x_, R, t2);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_subtractWithIntArray_withIntArray_withIntArray_(t2, t1, Y3->x_);
  OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *Z3 = [[OrgBouncycastleMathEcCustomSecSecP521R1FieldElement alloc] initWithIntArray:H];
  if (!Z1IsOne) {
    OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(Z3->x_, Z1->x_, Z3->x_);
  }
  if (!Z2IsOne) {
    OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(Z3->x_, Z2->x_, Z3->x_);
  }
  IOSObjectArray *zs = [IOSObjectArray newArrayWithObjects:(id[]){ Z3 } count:1 type:OrgBouncycastleMathEcECFieldElement_class_()];
  return [[OrgBouncycastleMathEcCustomSecSecP521R1Point alloc] initWithOrgBouncycastleMathEcECCurve:curve withOrgBouncycastleMathEcECFieldElement:X3 withOrgBouncycastleMathEcECFieldElement:Y3 withOrgBouncycastleMathEcECFieldElementArray:zs withBoolean:self->withCompression_];
}

- (OrgBouncycastleMathEcECPoint *)twice {
  if ([self isInfinity]) {
    return self;
  }
  OrgBouncycastleMathEcECCurve *curve = [self getCurve];
  OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *Y1 = (OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) check_class_cast(self->y_, [OrgBouncycastleMathEcCustomSecSecP521R1FieldElement class]);
  if ([((OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) nil_chk(Y1)) isZero]) {
    return [((OrgBouncycastleMathEcECCurve *) nil_chk(curve)) getInfinity];
  }
  OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *X1 = (OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) check_class_cast(self->x_, [OrgBouncycastleMathEcCustomSecSecP521R1FieldElement class]), *Z1 = (OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) check_class_cast(IOSObjectArray_Get(nil_chk(self->zs_), 0), [OrgBouncycastleMathEcCustomSecSecP521R1FieldElement class]);
  IOSIntArray *t1 = OrgBouncycastleMathRawNat_createWithInt_(17);
  IOSIntArray *t2 = OrgBouncycastleMathRawNat_createWithInt_(17);
  IOSIntArray *Y1Squared = OrgBouncycastleMathRawNat_createWithInt_(17);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_squareWithIntArray_withIntArray_(Y1->x_, Y1Squared);
  IOSIntArray *T = OrgBouncycastleMathRawNat_createWithInt_(17);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_squareWithIntArray_withIntArray_(Y1Squared, T);
  jboolean Z1IsOne = [((OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) nil_chk(Z1)) isOne];
  IOSIntArray *Z1Squared = Z1->x_;
  if (!Z1IsOne) {
    Z1Squared = t2;
    OrgBouncycastleMathEcCustomSecSecP521R1Field_squareWithIntArray_withIntArray_(Z1->x_, Z1Squared);
  }
  OrgBouncycastleMathEcCustomSecSecP521R1Field_subtractWithIntArray_withIntArray_withIntArray_(((OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *) nil_chk(X1))->x_, Z1Squared, t1);
  IOSIntArray *M = t2;
  OrgBouncycastleMathEcCustomSecSecP521R1Field_addWithIntArray_withIntArray_withIntArray_(X1->x_, Z1Squared, M);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(M, t1, M);
  OrgBouncycastleMathRawNat_addBothToWithInt_withIntArray_withIntArray_withIntArray_(17, M, M, M);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_reduce23WithIntArray_(M);
  IOSIntArray *S = Y1Squared;
  OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(Y1Squared, X1->x_, S);
  OrgBouncycastleMathRawNat_shiftUpBitsWithInt_withIntArray_withInt_withInt_(17, S, 2, 0);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_reduce23WithIntArray_(S);
  OrgBouncycastleMathRawNat_shiftUpBitsWithInt_withIntArray_withInt_withInt_withIntArray_(17, T, 3, 0, t1);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_reduce23WithIntArray_(t1);
  OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *X3 = [[OrgBouncycastleMathEcCustomSecSecP521R1FieldElement alloc] initWithIntArray:T];
  OrgBouncycastleMathEcCustomSecSecP521R1Field_squareWithIntArray_withIntArray_(M, X3->x_);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_subtractWithIntArray_withIntArray_withIntArray_(X3->x_, S, X3->x_);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_subtractWithIntArray_withIntArray_withIntArray_(X3->x_, S, X3->x_);
  OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *Y3 = [[OrgBouncycastleMathEcCustomSecSecP521R1FieldElement alloc] initWithIntArray:S];
  OrgBouncycastleMathEcCustomSecSecP521R1Field_subtractWithIntArray_withIntArray_withIntArray_(S, X3->x_, Y3->x_);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(Y3->x_, M, Y3->x_);
  OrgBouncycastleMathEcCustomSecSecP521R1Field_subtractWithIntArray_withIntArray_withIntArray_(Y3->x_, t1, Y3->x_);
  OrgBouncycastleMathEcCustomSecSecP521R1FieldElement *Z3 = [[OrgBouncycastleMathEcCustomSecSecP521R1FieldElement alloc] initWithIntArray:M];
  OrgBouncycastleMathEcCustomSecSecP521R1Field_twiceWithIntArray_withIntArray_(Y1->x_, Z3->x_);
  if (!Z1IsOne) {
    OrgBouncycastleMathEcCustomSecSecP521R1Field_multiplyWithIntArray_withIntArray_withIntArray_(Z3->x_, Z1->x_, Z3->x_);
  }
  return [[OrgBouncycastleMathEcCustomSecSecP521R1Point alloc] initWithOrgBouncycastleMathEcECCurve:curve withOrgBouncycastleMathEcECFieldElement:X3 withOrgBouncycastleMathEcECFieldElement:Y3 withOrgBouncycastleMathEcECFieldElementArray:[IOSObjectArray newArrayWithObjects:(id[]){ Z3 } count:1 type:OrgBouncycastleMathEcECFieldElement_class_()] withBoolean:self->withCompression_];
}

- (OrgBouncycastleMathEcECPoint *)twicePlusWithOrgBouncycastleMathEcECPoint:(OrgBouncycastleMathEcECPoint *)b {
  if (self == b) {
    return [self threeTimes];
  }
  if ([self isInfinity]) {
    return b;
  }
  if ([((OrgBouncycastleMathEcECPoint *) nil_chk(b)) isInfinity]) {
    return [self twice];
  }
  OrgBouncycastleMathEcECFieldElement *Y1 = self->y_;
  if ([((OrgBouncycastleMathEcECFieldElement *) nil_chk(Y1)) isZero]) {
    return b;
  }
  return [((OrgBouncycastleMathEcECPoint *) nil_chk([self twice])) addWithOrgBouncycastleMathEcECPoint:b];
}

- (OrgBouncycastleMathEcECPoint *)threeTimes {
  if ([self isInfinity] || [((OrgBouncycastleMathEcECFieldElement *) nil_chk(self->y_)) isZero]) {
    return self;
  }
  return [((OrgBouncycastleMathEcECPoint *) nil_chk([self twice])) addWithOrgBouncycastleMathEcECPoint:self];
}

- (OrgBouncycastleMathEcECFieldElement *)twoWithOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)x {
  return [((OrgBouncycastleMathEcECFieldElement *) nil_chk(x)) addWithOrgBouncycastleMathEcECFieldElement:x];
}

- (OrgBouncycastleMathEcECFieldElement *)threeWithOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)x {
  return [((OrgBouncycastleMathEcECFieldElement *) nil_chk([self twoWithOrgBouncycastleMathEcECFieldElement:x])) addWithOrgBouncycastleMathEcECFieldElement:x];
}

- (OrgBouncycastleMathEcECFieldElement *)fourWithOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)x {
  return [self twoWithOrgBouncycastleMathEcECFieldElement:[self twoWithOrgBouncycastleMathEcECFieldElement:x]];
}

- (OrgBouncycastleMathEcECFieldElement *)eightWithOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)x {
  return [self fourWithOrgBouncycastleMathEcECFieldElement:[self twoWithOrgBouncycastleMathEcECFieldElement:x]];
}

- (OrgBouncycastleMathEcECFieldElement *)doubleProductFromSquaresWithOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)a
                                                                 withOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)b
                                                                 withOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)aSquared
                                                                 withOrgBouncycastleMathEcECFieldElement:(OrgBouncycastleMathEcECFieldElement *)bSquared {
  return [((OrgBouncycastleMathEcECFieldElement *) nil_chk([((OrgBouncycastleMathEcECFieldElement *) nil_chk([((OrgBouncycastleMathEcECFieldElement *) nil_chk([((OrgBouncycastleMathEcECFieldElement *) nil_chk(a)) addWithOrgBouncycastleMathEcECFieldElement:b])) square])) subtractWithOrgBouncycastleMathEcECFieldElement:aSquared])) subtractWithOrgBouncycastleMathEcECFieldElement:bSquared];
}

- (OrgBouncycastleMathEcECPoint *)negate {
  if ([self isInfinity]) {
    return self;
  }
  return [[OrgBouncycastleMathEcCustomSecSecP521R1Point alloc] initWithOrgBouncycastleMathEcECCurve:curve_ withOrgBouncycastleMathEcECFieldElement:self->x_ withOrgBouncycastleMathEcECFieldElement:[((OrgBouncycastleMathEcECFieldElement *) nil_chk(self->y_)) negate] withOrgBouncycastleMathEcECFieldElementArray:self->zs_ withBoolean:self->withCompression_];
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgBouncycastleMathEcCustomSecSecP521R1Point)
