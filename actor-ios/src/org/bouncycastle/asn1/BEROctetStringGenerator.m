//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/actor-ios/build/java/org/bouncycastle/asn1/BEROctetStringGenerator.java
//

#include "IOSClass.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/io/OutputStream.h"
#include "java/lang/Math.h"
#include "java/lang/System.h"
#include "org/bouncycastle/asn1/BERGenerator.h"
#include "org/bouncycastle/asn1/BEROctetStringGenerator.h"
#include "org/bouncycastle/asn1/BERTags.h"
#include "org/bouncycastle/asn1/DEROctetString.h"
#include "org/bouncycastle/asn1/DEROutputStream.h"

@interface OrgBouncycastleAsn1BEROctetStringGenerator_BufferedBEROctetStream () {
 @public
  OrgBouncycastleAsn1BEROctetStringGenerator *this$0_;
  IOSByteArray *_buf_;
  jint _off_;
  OrgBouncycastleAsn1DEROutputStream *_derOut_;
}
@end

J2OBJC_FIELD_SETTER(OrgBouncycastleAsn1BEROctetStringGenerator_BufferedBEROctetStream, this$0_, OrgBouncycastleAsn1BEROctetStringGenerator *)
J2OBJC_FIELD_SETTER(OrgBouncycastleAsn1BEROctetStringGenerator_BufferedBEROctetStream, _buf_, IOSByteArray *)
J2OBJC_FIELD_SETTER(OrgBouncycastleAsn1BEROctetStringGenerator_BufferedBEROctetStream, _derOut_, OrgBouncycastleAsn1DEROutputStream *)

@implementation OrgBouncycastleAsn1BEROctetStringGenerator

- (instancetype)initWithJavaIoOutputStream:(JavaIoOutputStream *)outArg {
  if (self = [super initWithJavaIoOutputStream:outArg]) {
    [self writeBERHeaderWithInt:OrgBouncycastleAsn1BERTags_CONSTRUCTED | OrgBouncycastleAsn1BERTags_OCTET_STRING];
  }
  return self;
}

- (instancetype)initWithJavaIoOutputStream:(JavaIoOutputStream *)outArg
                                   withInt:(jint)tagNo
                               withBoolean:(jboolean)isExplicit {
  if (self = [super initWithJavaIoOutputStream:outArg withInt:tagNo withBoolean:isExplicit]) {
    [self writeBERHeaderWithInt:OrgBouncycastleAsn1BERTags_CONSTRUCTED | OrgBouncycastleAsn1BERTags_OCTET_STRING];
  }
  return self;
}

- (JavaIoOutputStream *)getOctetOutputStream {
  return [self getOctetOutputStreamWithByteArray:[IOSByteArray newArrayWithLength:1000]];
}

- (JavaIoOutputStream *)getOctetOutputStreamWithByteArray:(IOSByteArray *)buf {
  return [[OrgBouncycastleAsn1BEROctetStringGenerator_BufferedBEROctetStream alloc] initWithOrgBouncycastleAsn1BEROctetStringGenerator:self withByteArray:buf];
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgBouncycastleAsn1BEROctetStringGenerator)

@implementation OrgBouncycastleAsn1BEROctetStringGenerator_BufferedBEROctetStream

- (instancetype)initWithOrgBouncycastleAsn1BEROctetStringGenerator:(OrgBouncycastleAsn1BEROctetStringGenerator *)outer$
                                                     withByteArray:(IOSByteArray *)buf {
  this$0_ = outer$;
  if (self = [super init]) {
    _buf_ = buf;
    _off_ = 0;
    _derOut_ = [[OrgBouncycastleAsn1DEROutputStream alloc] initWithJavaIoOutputStream:outer$->_out_];
  }
  return self;
}

- (void)writeWithInt:(jint)b {
  *IOSByteArray_GetRef(nil_chk(_buf_), _off_++) = (jbyte) b;
  if (_off_ == _buf_->size_) {
    OrgBouncycastleAsn1DEROctetString_encodeWithOrgBouncycastleAsn1DEROutputStream_withByteArray_(_derOut_, _buf_);
    _off_ = 0;
  }
}

- (void)writeWithByteArray:(IOSByteArray *)b
                   withInt:(jint)off
                   withInt:(jint)len {
  while (len > 0) {
    jint numToCopy = JavaLangMath_minWithInt_withInt_(len, ((IOSByteArray *) nil_chk(_buf_))->size_ - _off_);
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(b, off, _buf_, _off_, numToCopy);
    _off_ += numToCopy;
    if (_off_ < _buf_->size_) {
      break;
    }
    OrgBouncycastleAsn1DEROctetString_encodeWithOrgBouncycastleAsn1DEROutputStream_withByteArray_(_derOut_, _buf_);
    _off_ = 0;
    off += numToCopy;
    len -= numToCopy;
  }
}

- (void)close {
  if (_off_ != 0) {
    IOSByteArray *bytes = [IOSByteArray newArrayWithLength:_off_];
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(_buf_, 0, bytes, 0, _off_);
    OrgBouncycastleAsn1DEROctetString_encodeWithOrgBouncycastleAsn1DEROutputStream_withByteArray_(_derOut_, bytes);
  }
  [this$0_ writeBEREnd];
}

- (void)copyAllFieldsTo:(OrgBouncycastleAsn1BEROctetStringGenerator_BufferedBEROctetStream *)other {
  [super copyAllFieldsTo:other];
  other->this$0_ = this$0_;
  other->_buf_ = _buf_;
  other->_off_ = _off_;
  other->_derOut_ = _derOut_;
}

@end

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgBouncycastleAsn1BEROctetStringGenerator_BufferedBEROctetStream)
