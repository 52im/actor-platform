//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/ex3ndr/Develop/actor-model/actor-ios/build/java/org/bouncycastle/asn1/BERGenerator.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/io/InputStream.h"
#include "java/io/OutputStream.h"
#include "org/bouncycastle/asn1/BERGenerator.h"
#include "org/bouncycastle/asn1/BERTags.h"

__attribute__((unused)) static void OrgBouncycastleAsn1BERGenerator_writeHdrWithInt_(OrgBouncycastleAsn1BERGenerator *self, jint tag);

@interface OrgBouncycastleAsn1BERGenerator () {
 @public
  jboolean _tagged_;
  jboolean _isExplicit_;
  jint _tagNo_;
}

- (void)writeHdrWithInt:(jint)tag;
@end

@implementation OrgBouncycastleAsn1BERGenerator

- (instancetype)initWithJavaIoOutputStream:(JavaIoOutputStream *)outArg {
  if (self = [super initWithJavaIoOutputStream:outArg]) {
    _tagged_ = NO;
  }
  return self;
}

- (instancetype)initWithJavaIoOutputStream:(JavaIoOutputStream *)outArg
                                   withInt:(jint)tagNo
                               withBoolean:(jboolean)isExplicit {
  if (self = [super initWithJavaIoOutputStream:outArg]) {
    _tagged_ = NO;
    _tagged_ = YES;
    _isExplicit_ = isExplicit;
    _tagNo_ = tagNo;
  }
  return self;
}

- (JavaIoOutputStream *)getRawOutputStream {
  return _out_;
}

- (void)writeHdrWithInt:(jint)tag {
  OrgBouncycastleAsn1BERGenerator_writeHdrWithInt_(self, tag);
}

- (void)writeBERHeaderWithInt:(jint)tag {
  if (_tagged_) {
    jint tagNum = _tagNo_ | OrgBouncycastleAsn1BERTags_TAGGED;
    if (_isExplicit_) {
      OrgBouncycastleAsn1BERGenerator_writeHdrWithInt_(self, tagNum | OrgBouncycastleAsn1BERTags_CONSTRUCTED);
      OrgBouncycastleAsn1BERGenerator_writeHdrWithInt_(self, tag);
    }
    else {
      if ((tag & OrgBouncycastleAsn1BERTags_CONSTRUCTED) != 0) {
        OrgBouncycastleAsn1BERGenerator_writeHdrWithInt_(self, tagNum | OrgBouncycastleAsn1BERTags_CONSTRUCTED);
      }
      else {
        OrgBouncycastleAsn1BERGenerator_writeHdrWithInt_(self, tagNum);
      }
    }
  }
  else {
    OrgBouncycastleAsn1BERGenerator_writeHdrWithInt_(self, tag);
  }
}

- (void)writeBERBodyWithJavaIoInputStream:(JavaIoInputStream *)contentStream {
  jint ch;
  while ((ch = [((JavaIoInputStream *) nil_chk(contentStream)) read]) >= 0) {
    [((JavaIoOutputStream *) nil_chk(_out_)) writeWithInt:ch];
  }
}

- (void)writeBEREnd {
  [((JavaIoOutputStream *) nil_chk(_out_)) writeWithInt:(jint) 0x00];
  [_out_ writeWithInt:(jint) 0x00];
  if (_tagged_ && _isExplicit_) {
    [_out_ writeWithInt:(jint) 0x00];
    [_out_ writeWithInt:(jint) 0x00];
  }
}

- (void)copyAllFieldsTo:(OrgBouncycastleAsn1BERGenerator *)other {
  [super copyAllFieldsTo:other];
  other->_tagged_ = _tagged_;
  other->_isExplicit_ = _isExplicit_;
  other->_tagNo_ = _tagNo_;
}

@end

void OrgBouncycastleAsn1BERGenerator_writeHdrWithInt_(OrgBouncycastleAsn1BERGenerator *self, jint tag) {
  [((JavaIoOutputStream *) nil_chk(self->_out_)) writeWithInt:tag];
  [self->_out_ writeWithInt:(jint) 0x80];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgBouncycastleAsn1BERGenerator)
